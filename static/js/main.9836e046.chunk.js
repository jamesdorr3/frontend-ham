(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{48:function(e,t,a){e.exports=a(93)},53:function(e,t,a){},54:function(e,t,a){},93:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(21),l=a.n(o),c=(a(53),a(4)),i=a(5),s=a(7),u=a(6),m=a(8),d=(a(54),a(2)),p="https://ham-backend.herokuapp.com/",h=function(){return{"Content-Type":"application/json",Accept:"application/json",Authorization:localStorage.getItem("token")?"BEARER ".concat(localStorage.getItem("token")):null}},f=function(e){return function(t){return t({type:"START_LOADING"}),g(),fetch("".concat(p,"search/make_choice"),{method:"POST",headers:h(),body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){t({type:"STOP_LOADING"}),t({type:"ADD_CHOICE",payload:e})})}};function g(){document.querySelector(".table").focus()}var y=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleAddChoice=function(){a.props.clearForm(),a.props.selectSearchResult({fdcId:a.props.food.fdcId,categoryId:a.props.categoryId,dayId:a.props.day.id})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("li",{className:"searchResult",onClick:this.handleAddChoice},r.a.createElement("span",{className:"resultName"},this.props.food.description),this.props.food.brandOwner?r.a.createElement("span",{className:"brandName"}," - ",this.props.food.brandOwner):null)}}]),t}(r.a.Component),E=Object(d.b)(function(e){return{day:e.day}},function(e){return{selectSearchResult:function(t){return e(f(t))}}})(y),b=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleAddChoice=function(){a.props.clearForm(),a.props.selectInternalSearchResult({foodId:a.props.food.id,categoryId:a.props.categoryId,dayId:a.props.day.id})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("li",{className:"searchResult",onClick:this.handleAddChoice},r.a.createElement("span",{className:"resultName"},this.props.food.name),this.props.food.brand?r.a.createElement("span",{className:"brandName"}," - ",this.props.food.brand):null,r.a.createElement("ul",{className:"resultMacros"},r.a.createElement("li",null,"fat: ",this.props.food.fat.toFixed()),r.a.createElement("li",null,"carbs: ",this.props.food.carbs.toFixed()),r.a.createElement("li",null,"protein: ",this.props.food.protein.toFixed())))}}]),t}(r.a.Component),v=Object(d.b)(function(e){return{day:e.day,categories:e.categories}},function(e){return{selectInternalSearchResult:function(t){return e(function(e){return g(),function(t){return t({type:"START_LOADING"}),fetch("".concat(p,"/choices"),{method:"POST",headers:h(),body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){t({type:"STOP_LOADING"}),t({type:"ADD_CHOICE",payload:e})})}}(t))}}})(b),O=a(3),C=a(1),S=function(e){function t(){var e,a,n;Object(c.a)(this,t);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state=(a={name:null,brand:null,serving_unit_amount:null,serving_unit_name:null,serving_grams:null,calories:null},Object(C.a)(a,"serving_unit_name",null),Object(C.a)(a,"fat",null),Object(C.a)(a,"carbs",null),Object(C.a)(a,"protein",null),Object(C.a)(a,"cholesterol",null),Object(C.a)(a,"dietary_fiber",null),Object(C.a)(a,"potassium",null),Object(C.a)(a,"saturated_fat",null),Object(C.a)(a,"sodium",null),Object(C.a)(a,"sugars",null),Object(C.a)(a,"unit_size",null),Object(C.a)(a,"upc",null),Object(C.a)(a,"error",null),a),n.handleChange=function(e){n.setState(Object(C.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault();var t,a=n.state;a.name&&a.serving_unit_amount&&a.serving_unit_name&&a.serving_grams&&a.calories&&a.fat&&a.carbs&&a.protein?(n.props.createFood(Object(O.a)({},n.state,{categoryId:n.props.categoryId})),n.props.toggleNewFoodForm(),n.setState((t={name:"",brand:"",serving_unit_amount:"",serving_unit_name:"",serving_grams:"",calories:""},Object(C.a)(t,"serving_unit_name",""),Object(C.a)(t,"fat",""),Object(C.a)(t,"carbs",""),Object(C.a)(t,"protein",""),Object(C.a)(t,"cholesterol",""),Object(C.a)(t,"dietary_fiber",""),Object(C.a)(t,"potassium",""),Object(C.a)(t,"saturated_fat",""),Object(C.a)(t,"sodium",""),Object(C.a)(t,"sugars",""),Object(C.a)(t,"unit_size",""),Object(C.a)(t,"upc",""),t))):n.setState({error:"Please fill required fields"})},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"createFoodContainer",style:{display:this.props.showNewFoodForm?"block":"none"}},r.a.createElement("button",{className:"closeButton",onClick:this.props.toggleNewFoodForm},"Close"),r.a.createElement("form",{onSubmit:this.handleSubmit,className:"foodForm"},this.state.error?r.a.createElement("p",{className:"errorMessage"},this.state.error):null,r.a.createElement("ul",{className:"newFoodGrid"},r.a.createElement("li",null,r.a.createElement("label",null,"Food name"),r.a.createElement("input",{type:"text",value:this.state.name,onChange:this.handleChange,name:"name",placeholder:"Food name"})),r.a.createElement("li",null,r.a.createElement("label",null,"Brand (optional)"),r.a.createElement("input",{type:"text",value:this.state.brand,onChange:this.handleChange,name:"brand",placeholder:"food brand (optional)"})),r.a.createElement("li",null,r.a.createElement("label",null,"Serving Amount"),r.a.createElement("input",{type:"number",step:"any",min:"0.1",value:this.state.serving_unit_amount,onChange:this.handleChange,name:"serving_unit_amount",placeholder:"serving amount"})),r.a.createElement("li",null,r.a.createElement("label",null,"Serving Unit"),r.a.createElement("input",{type:"text",list:"units",name:"serving_unit_name",value:this.state.serving_unit_name,onChange:this.handleChange,placeholder:"unit"}),r.a.createElement("datalist",{id:"units"},["unit","tbsp","tsp","cup","package","piece","small","medium","large"].map(function(e){return r.a.createElement("option",{value:e,key:e,name:"measure"},e," ")}))),r.a.createElement("li",null,r.a.createElement("label",null,"Serving in Grams"),r.a.createElement("input",{type:"number",step:"any",min:"0.1",value:this.state.serving_grams,onChange:this.handleChange,name:"serving_grams",placeholder:"grams/serving"})),r.a.createElement("li",null,r.a.createElement("label",null,"Calories"),r.a.createElement("input",{type:"number",step:"any",min:"0",value:this.state.calories,onChange:this.handleChange,name:"calories",placeholder:"Calories"})),r.a.createElement("li",null,r.a.createElement("label",null,"Fat"),r.a.createElement("input",{type:"number",step:"any",min:"0",value:this.state.fat,onChange:this.handleChange,name:"fat",placeholder:"fat"})),r.a.createElement("li",null,r.a.createElement("label",null,"Carbs"),r.a.createElement("input",{type:"number",step:"any",min:"0",value:this.state.carbs,onChange:this.handleChange,name:"carbs",placeholder:"carbs"})),r.a.createElement("li",null,r.a.createElement("label",null,"Protein"),r.a.createElement("input",{type:"number",step:"any",min:"0",value:this.state.protein,onChange:this.handleChange,name:"protein",placeholder:"protein"})),r.a.createElement("li",null,r.a.createElement("input",{type:"submit"}))),r.a.createElement("a",{onClick:function(){return e.setState({moreInfoForm:!e.state.moreInfoForm})},className:"showMore"},this.state.moreInfoForm?"\u2b06 Show Less Info (Optional) \u2b06":"\u2b07 Add More Info (Optional) \u2b07"),r.a.createElement("ul",{className:"newFoodGrid",style:{display:this.state.moreInfoForm?"grid":"none"}},r.a.createElement("li",null,r.a.createElement("label",null,"Saturated Fat"),r.a.createElement("input",{type:"number",step:"any",min:"0",value:this.state.saturated_fat,onChange:this.handleChange,name:"saturated_fat",placeholder:"saturated fat"})),r.a.createElement("li",null,r.a.createElement("label",null,"Sugars"),r.a.createElement("input",{type:"number",step:"any",min:"0",value:this.state.sugars,onChange:this.handleChange,name:"sugars",placeholder:"sugars"})),r.a.createElement("li",null,r.a.createElement("label",null,"Dietary Fiber"),r.a.createElement("input",{type:"number",step:"any",min:"0",value:this.state.dietary_fiber,onChange:this.handleChange,name:"dietary_fiber",placeholder:"dietary fiber"})),r.a.createElement("li",null,r.a.createElement("label",null,"Sodium"),r.a.createElement("input",{type:"number",step:"any",min:"0",value:this.state.sodium,onChange:this.handleChange,name:"sodium",placeholder:"sodium"})),r.a.createElement("li",null,r.a.createElement("label",null,"Cholesterol"),r.a.createElement("input",{type:"number",step:"any",min:"0",value:this.state.cholesterol,onChange:this.handleChange,name:"cholesterol",placeholder:"cholesterol"})),r.a.createElement("li",null,r.a.createElement("label",null,"Potassium"),r.a.createElement("input",{type:"number",step:"any",min:"0",value:this.state.potassium,onChange:this.handleChange,name:"potassium",placeholder:"potassium"})),r.a.createElement("li",null,r.a.createElement("label",null,"Unit Size"),r.a.createElement("input",{type:"number",step:"any",min:"0",value:this.state.unit_size,onChange:this.handleChange,name:"unit_size",placeholder:"unit size"})),r.a.createElement("li",null,r.a.createElement("label",null,"Bar Code / UPC"),r.a.createElement("input",{type:"number",step:"any",min:"0",value:this.state.upc,onChange:this.handleChange,name:"upc",placeholder:"UPC code"})),r.a.createElement("li",null),r.a.createElement("li",null,r.a.createElement("input",{type:"submit"})))))}}]),t}(r.a.Component),N=Object(d.b)(null,function(e){return{createFood:function(t){return e(function(e){return function(t){return t({type:"START_LOADING"}),fetch("".concat(p,"/foods"),{method:"POST",headers:h(),body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){t({type:"STOP_LOADING"}),t({type:"ADD_FOOD",payload:e})})}}(t))}}})(S),D=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={text:"",favorites:[],filteredFavorites:[],common:[],internal:[],error:!1,addFood:!1,showResults:!1,currentPage:0,totalPages:0},a.componentDidMount=function(){a.props.foodsIndex("").then(function(e){return e.json()}).then(function(e){a.setState({favorites:e.favorites})})},a.foodsIndex=function(e){a.props.foodsIndex(e).then(function(e){return e.json()}).then(function(e){a.setState({filteredFavorites:e.favorites})})},a.handleChange=function(e){a.setState({text:e.target.value}),0===e.target.value.length&&(a.foodsIndex(""),a.clearResults())},a.internalSearch=function(e){a.props.internalSearch(e).then(function(e){return e.json()}).then(function(e){e.internal.length>0?a.setState({internal:e.internal}):a.setState({internal:[]})})},a.handleSubmit=function(e){e.preventDefault(),a.state.text&&(a.setState({common:[]}),a.props.startLoading(),a.foodsIndex(a.state.text),a.externalSearch(a.state.text,1))},a.clearResults=function(){a.setState({filteredFavorites:[],branded:[],common:[],internal:[],text:"",error:!1,showResults:!1,currentPage:0,totalPages:0})},a.categoryByTime=function(){var e=(new Date).getHours();return e<9?a.props.categories.find(function(e){return"Breakfast"==e.name}).id:e<16?a.props.categories.find(function(e){return"Lunch"==e.name}).id:a.props.categories.find(function(e){return"Dinner"==e.name}).id},a.showResults=function(){a.setState({showResults:!0})},a.hideResults=function(){a.setState({showResults:!1})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"externalSearch",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.props.externalSearch(e,a).then(function(e){return e.json()}).then(function(e){console.log(e),t.props.stopLoading(),e.common&&e.common.length>0?t.setState({common:t.state.common.concat(e.common),currentPage:e.current_page,totalPages:e.total_pages}):t.setState({error:"No More Results"})})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"arrow",style:{display:this.props.choiceFoods.length>0?"none":"block"}},r.a.createElement("span",{className:"rectangle"},"Start Here")),r.a.createElement("div",{className:"centered row foodSearchContainer",onFocus:this.showResults},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"searchForm"},r.a.createElement("input",{type:"search",list:"popularSearches",value:this.state.text,onChange:this.handleChange,placeholder:"Search for any food...",className:"searchText"}),r.a.createElement("input",{type:"image",src:"search-icon.png",alt:"Search",name:"submit",className:"searchButton searchIcon"})),r.a.createElement("ul",{className:this.state.showResults?"searchResultContainer":"searchResultContainerHidden"},r.a.createElement("h5",null,"Favorites"),this.state[this.state.filteredFavorites.length>0?"filteredFavorites":"favorites"].map(function(t){return r.a.createElement(v,{categoryId:e.categoryByTime(),key:t.id,food:t,addChoice:e.props.addChoice,clearForm:e.clearResults})}),r.a.createElement("h5",null,"More Results"),this.state.internal.map(function(t){return r.a.createElement(v,{categoryId:e.categoryByTime(),key:t.food_name,food:t,addChoice:e.props.addChoice,clearForm:e.clearResults})}),this.state.common.map(function(t){return r.a.createElement(E,{categoryId:e.categoryByTime(),key:t.fdcId,food:t,addChoice:e.props.addChoice,clearForm:e.clearResults})}),this.state.currentPage<this.state.totalPages?r.a.createElement("li",{className:"searchResult loadMore",onClick:function(){return e.externalSearch(e.state.text,e.state.currentPage+1)}},"Load More - Showing ",(this.state.currentPage/this.state.totalPages*100).toFixed(),"% of results"):null,this.props.removed.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("h5",null,"Recently Deleted"),this.props.removed.map(function(t){return r.a.createElement(v,{categoryId:e.categoryByTime(),key:t.food_name,food:t,addChoice:e.props.addChoice,clearForm:e.clearResults})})):null,this.state.error?r.a.createElement("li",null,this.state.error):null)))}}]),t}(r.a.Component),j=Object(d.b)(function(e){return e},function(e){return{startLoading:function(){return e({type:"START_LOADING"})},stopLoading:function(){return e({type:"STOP_LOADING"})},internalSearch:function(t){return e(function(e){return function(t){return fetch("".concat(p,"search/internal_search?q=").concat(e),{headers:h()})}}(t))},externalSearch:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(a){return fetch("".concat(p,"search/many?q=").concat(e,"&pageNumber=").concat(t),{headers:h()})}}(t,a))},foodsIndex:function(t){return e(function(e){return function(t){return fetch("".concat(p,"/foods?q=").concat(e),{headers:h()})}}(t))}}})(D),w=a(12),A=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={amount:a.props.choiceFood.choice.amount,measure:a.props.choiceFood.choice.measure,className:"choice grid"},a.autoUpdateMacro=function(e){var t=a.props.choiceFood.choice.amount,n=a.props.choiceFood.measures.find(function(e){return e.id===a.props.choiceFood.choice.measure_id}),r=t*n.grams/a.props.choiceFood.food.serving_grams/(n.amount?n.amount:1);return(a.props.choiceFood.food[e]*r).toFixed()},a.updateInDB=function(){a.props.choiceFood.choice.id;a.props.updateChoice(Object(O.a)({},a.props.choiceFood.choice))},a.handleAmountChange=function(e){if(e.target.value>=0){var t=a.props.choiceFood.choice.id;a.setState({amount:e.target.value}),a.props.editChoice({choice:{amount:e.target.value,id:t}})}},a.handleMeasureChange=function(e){var t=a.props.choiceFood.choice.measure_id,n=a.props.choiceFood.measures.find(function(e){return e.id===t}),r=parseInt(e.target.value),o=a.props.choiceFood.measures.find(function(e){return e.id===r}),l=n.grams/o.grams*a.props.choiceFood.choice.amount*((o.amount||1)/(n.amount||1));l=/^gram(s)?$/i.test(o.name)?l.toFixed():l.toFixed(2),a.props.editChoice({choice:{measure_id:r,amount:l,id:a.props.choiceFood.choice.id}}),a.updateInDB()},a.generateMeasures=function(){return a.props.choiceFood.measures.sort(function(e,t){return e.name-t.name}).map(function(e){return r.a.createElement("option",{value:e.id,key:e.id},e.name)})},a.deleteChoice=function(){a.setState({className:"grid shrunk"}),setTimeout(function(){var e=a.props.choiceFood.choice.id;a.props.deleteChoice(e),a.props.destroyChoice(e)},500)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({className:"grid toExpand"}),setTimeout(function(){e.setState({className:"choice grid"})},500)}},{key:"render",value:function(){var e=this;return r.a.createElement(w.b,{draggableId:this.props.choiceFood.choice.id,index:this.props.index},function(t){return r.a.createElement("ul",Object.assign({className:e.state.className},t.draggableProps,t.dragHandleProps,{ref:t.innerRef,id:e.props.choiceFood.choice.id}),r.a.createElement("li",{className:"name"},r.a.createElement("span",{className:"nameScroll"},e.props.choiceFood.food.name,e.props.choiceFood.food.brand?" - ".concat(e.props.choiceFood.food.brand):null)),r.a.createElement("li",{className:"amount"},r.a.createElement("input",{type:"number",ref:function(t){e.amountInput=t},min:"0",name:"amount",value:e.props.choiceFood.choice.amount,onChange:e.handleAmountChange,onBlur:e.updateInDB})),r.a.createElement("li",{className:"measure"},r.a.createElement("select",{className:"",value:e.props.choiceFood.choice.measure_id,onChange:e.handleMeasureChange,name:"measure"},e.generateMeasures())),r.a.createElement("li",{className:"macro calories"},e.autoUpdateMacro("calories")),r.a.createElement("li",{className:"macro fat"},e.autoUpdateMacro("fat")),r.a.createElement("li",{className:"macro carbs"},e.autoUpdateMacro("carbs")),r.a.createElement("li",{className:"macro protein"},e.autoUpdateMacro("protein")),r.a.createElement("li",{className:"deleteColumn"},r.a.createElement("button",{onClick:e.deleteChoice,className:"deleteChoice deleteButton",alt:"delete choice"},r.a.createElement("img",{src:"trash-icon.png",className:"deleteChoice",alt:"delete choice"}))))})}}]),t}(r.a.Component),_=Object(d.b)(null,function(e){return{deleteChoice:function(t){return e({type:"DELETE_CHOICE",payload:t})},editChoice:function(t){return e({type:"EDIT_CHOICE",payload:t})},updateChoice:function(t){return e((a=t,function(e){return fetch("".concat(p,"choices/").concat(a.id),{method:"PATCH",headers:h(),body:JSON.stringify({choice:a})})}));var a},destroyChoice:function(t){return e((a=t,function(e){return fetch("".concat(p,"/choices/").concat(a),{method:"DELETE"})}));var a}}})(A),F=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).mySortedChoices=function(){return a.props.choiceFoods.filter(function(e){return e.choice.category_id===a.props.category.id}).sort(function(e,t){return e.choice.index-t.choice.index})},a.autoSum=function(e){var t=0;return a.props.choiceFoods.filter(function(e){return e.choice.category_id===a.props.category.id}).forEach(function(a){var n=a.choice.amount,r=a.measures.find(function(e){return e.id===a.choice.measure_id}),o=n*r.grams/a.food.serving_grams/(r.amount?r.amount:1);t+=parseInt(a.food[e]*o)}),t.toFixed()},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(w.c,{droppableId:this.props.category.id},function(t){return r.a.createElement("div",Object.assign({className:"category",ref:t.innerRef},t.droppableProps),r.a.createElement("p",{className:"name categoryName"},e.props.category.name),e.mySortedChoices().map(function(t,a){return r.a.createElement(_,{choiceFood:t,key:t.choice.id,index:a,deleteChoice:e.props.deleteChoice})}),t.placeholder,r.a.createElement("ul",{className:"grid categoryGrid"},r.a.createElement("li",{className:"name categoryName"}),r.a.createElement("li",{className:"subtotals"},"Subtotals: "),r.a.createElement("li",{className:"calories macro"},e.autoSum("calories")),r.a.createElement("li",{className:"fat macro"},e.autoSum("fat")),r.a.createElement("li",{className:"carbs macro"},e.autoSum("carbs")),r.a.createElement("li",{className:"protein macro"},e.autoSum("protein")),r.a.createElement("li",{className:"deleteColumn"})))})}}]),t}(r.a.Component),I=Object(d.b)(function(e){return{choiceFoods:e.choiceFoods}},function(e){return{}})(F),T=function(e){return function(t){return t({type:"START_LOADING"}),t({type:"EDIT_GOAL",payload:e}),fetch("".concat(p,"/goals/").concat(e.id),{method:"PATCH",headers:h(),body:JSON.stringify({goal:e})}).then(function(e){return t({type:"STOP_LOADING"})})}},L=function(e){return function(t){return t({type:"START_LOADING"}),fetch("".concat(p,"/goals"),{method:"POST",headers:h(),body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){t({type:"STOP_LOADING"}),t({type:"ADD_GOAL",payload:e})})}},G=function(e){return function(t){return fetch("".concat(p,"/goals/").concat(e),{method:"DELETE",headers:h()}).then(function(a){return t({type:"DELETE_GOAL",payload:e})})}},k=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={showUserInfo:!1,feet:null,inches:null,weight:null,bodyFat:null,age:null,gender:50,activityLevel:1.2},a.handleSubmit=function(e){var t;e.preventDefault(),t=a.state.bodyFat?(a.katchMcArdle()+a.mifflin())/2:a.mifflin(),a.props.createGoal({calories:t.toFixed(),fat:1,carbs:1,protein:1,name:"Total Daily Energy Expenditure",user_id:a.props.user.id}),a.props.toggleAutogenerate()},a.katchMcArdle=function(){return(370+21.6*((a.state.weight-a.state.weight*(a.state.bodyFat/100))/2.2))*a.state.activityLevel},a.mifflin=function(){return(10*(a.state.weight/2.2)+6.25*(2.54*(12*a.state.feet+parseInt(a.state.inches)))-5*a.state.age+(a.state.gender/100*166-161))*a.state.activityLevel},a.handleChange=function(e){a.setState(Object(C.a)({},e.target.name,e.target.value))},a.activityLevelSelect=function(){return r.a.createElement("select",{className:"activityLevel",name:"activityLevel",onChange:a.handleChange},[{name:"Sedentary - little or no exercise, desk job",multiplier:1.2},{name:"lightly active - light exercise, sports 1-3 days a week",multiplier:1.375},{name:"moderately active - moderate exercise, sports 3-5 days a week",multiplier:1.55},{name:"very active - hard exercise, sports 6-7 days a week",multiplier:1.725},{name:"extremely active - hard daily exercise, sports and physical job, or 2x a day exercise",multiplier:1.9}].map(function(e){return r.a.createElement("option",{name:e.name,key:e.name,value:e.multiplier},e.name)}))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"autogenerateMacros"},r.a.createElement("h2",null,"Generate Macros"),r.a.createElement("button",{onClick:this.props.toggleAutogenerate},"close"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",null,r.a.createElement("label",null,"Height"),r.a.createElement("span",null,r.a.createElement("input",{required:!0,type:"number",min:"1",max:"7",placeholder:"feet",name:"feet",className:"height",onChange:this.handleChange}),r.a.createElement("input",{required:!0,type:"number",min:"0",max:"11",placeholder:"inches",name:"inches",className:"height",onChange:this.handleChange}))),r.a.createElement("div",null,r.a.createElement("label",null,"Weight (lbs)"),r.a.createElement("input",{required:!0,type:"number",min:"1",max:"1500",className:"sensitive",placeholder:"pounds",name:"weight",onChange:this.handleChange})),r.a.createElement("div",null,r.a.createElement("label",null,"Body Fat %"),r.a.createElement("input",{type:"number",min:"2",max:"90",className:"sensitive",placeholder:"(optional)",name:"bodyFat",onChange:this.handleChange})),r.a.createElement("div",null,r.a.createElement("label",null,"Age"),r.a.createElement("input",{required:!0,type:"number",min:"18",max:"130",pattern:"[0-9]*",placeholder:"age",name:"age",onChange:this.handleChange})),r.a.createElement("label",{className:"gender"},"Gender"),r.a.createElement("div",null,r.a.createElement("span",{className:"gender"},r.a.createElement("label",null,"female"),r.a.createElement("input",{type:"range",name:"gender",onChange:this.handleChange}),r.a.createElement("label",null,"male"))),r.a.createElement("div",null,r.a.createElement("label",null,"Activity Level"),this.activityLevelSelect()),r.a.createElement("input",{type:"submit",value:"Generate Macros"})))}}]),t}(r.a.Component),x=Object(d.b)(function(e){return{user:e.user}},function(e){return{createGoal:function(t){return e(L(t))}}})(k),R=function(){return function(e){return e({type:"START_LOADING"}),fetch("".concat(p,"/days"),{method:"POST",headers:h(),body:JSON.stringify({date:(new Date).toLocaleString()})}).then(function(e){return e.json()}).then(function(t){e({type:"STOP_LOADING"}),e({type:"ADD_DAY",payload:t})})}},P=function(e){return function(t){return t({type:"START_LOADING"}),fetch("".concat(p,"/days/").concat(e),{headers:h()}).then(function(e){return e.json()}).then(function(e){t({type:"STOP_LOADING"}),t({type:"SELECT_DAY",payload:e})})}},M=function(e){return function(t){return t({type:"DELETE_DAY",payload:e}),fetch("".concat(p,"/days/").concat(e),{method:"DELETE",headers:h()})}},U=function(e){return function(t){return fetch("".concat(p,"days/").concat(e.id),{method:"PATCH",headers:h(),body:JSON.stringify(e)})}},B=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={showEditGoalForm:!1},a.goalsSelector=function(){var e=a.props.goals.sort(function(e,t){return e.name.toLowerCase()>t.name.toLowerCase()?1:e.name.toLowerCase()<t.name.toLowerCase()?-1:0});return r.a.createElement("select",{value:a.props.goal.id,className:"goalsSelect",onChange:a.changeGoal},e.map(function(e){return r.a.createElement("option",{value:e.id,key:e.id},e.name)}))},a.changeGoal=function(e){a.props.changeGoal(e.target.value),a.props.updateDay({id:a.props.day.id,goal_id:e.target.value})},a.addGoal=function(){a.props.createGoal({user_id:a.props.user.id,name:"new goal",calories:1,fat:1,carbs:1,protein:1}).then(a.editGoal)},a.editGoal=function(){a.setState({showEditGoalForm:!0})},a.deleteGoal=function(){a.props.goals.length>1&&a.props.deleteGoal(a.props.goal.id)},a.handleSubmit=function(e){e.preventDefault(),a.setState({showEditGoalForm:!1}),a.props.updateGoal(a.props.goal)},a.handleChange=function(e){a.props.editGoal(Object(C.a)({},e.target.name,e.target.value))},a.toggleAutogenerate=function(){a.setState({showAutogenerateForm:!a.state.showAutogenerateForm})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.state.showEditGoalForm?r.a.createElement("form",{className:"grid goals",onSubmit:this.handleSubmit},r.a.createElement("li",{className:"goalsTitle"},r.a.createElement("div",null,"Goals:")),r.a.createElement("li",{className:"goalsSelect"},r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"name",placeholder:"name",defaultValue:this.props.goal.name,value:this.state.name,onChange:this.handleChange}))),r.a.createElement("li",{className:"macro calories"},r.a.createElement("div",null,r.a.createElement("input",{type:"number",name:"calories",min:"0",placeholder:"kcal",value:this.props.goal.calories,onChange:this.handleChange}))),r.a.createElement("li",{className:"macro fat"},r.a.createElement("div",null,r.a.createElement("input",{type:"number",name:"fat",min:"0",placeholder:"grams",value:this.props.goal.fat,onChange:this.handleChange}))),r.a.createElement("li",{className:"macro carbs"},r.a.createElement("div",null,r.a.createElement("input",{type:"number",name:"carbs",min:"0",placeholder:"grams",value:this.props.goal.carbs,onChange:this.handleChange}))),r.a.createElement("li",{className:"macro protein"},r.a.createElement("div",null,r.a.createElement("input",{type:"number",name:"protein",min:"0",placeholder:"grams",value:this.props.goal.protein,onChange:this.handleChange}))),r.a.createElement("li",{className:"submitGoal"},r.a.createElement("input",{className:"submitGoal",type:"submit",value:"\u2714"}))):r.a.createElement("ul",{className:"grid goals"},r.a.createElement("li",{className:"goalsTitle"},r.a.createElement("div",null,"Goals:")),r.a.createElement("li",{className:"goalsSelect"},r.a.createElement("div",null,this.goalsSelector())),r.a.createElement("li",{className:"macro calories"},r.a.createElement("div",null,this.props.goal.calories)),r.a.createElement("li",{className:"macro fat"},r.a.createElement("div",null,this.props.goal.fat)),r.a.createElement("li",{className:"macro carbs"},r.a.createElement("div",null,this.props.goal.carbs)),r.a.createElement("li",{className:"macro protein"},r.a.createElement("div",null,this.props.goal.protein)),r.a.createElement("span",{className:"dropdownButton"},r.a.createElement("span",null,"\u22ef"),r.a.createElement("ul",{className:"dropdown"},r.a.createElement("li",{onClick:this.addGoal},r.a.createElement("button",null,r.a.createElement("img",{src:"add-icon-circle.png",className:"newGoal addButton",alt:"add new goal"})),"Add Goal"),r.a.createElement("li",{onClick:this.editGoal},r.a.createElement("button",null,r.a.createElement("img",{src:"edit-icon.png",className:"editGoal editButton",alt:"edit goal"})),"Edit Goal"),r.a.createElement("li",{onClick:this.deleteGoal},r.a.createElement("button",null,r.a.createElement("img",{src:"trash-icon.png",className:"deleteChoice deleteButton",alt:"delete choice"})),"Delete Goal"),r.a.createElement("li",{onClick:this.toggleAutogenerate},r.a.createElement("button",null,"\u267e"),"Autogenerate Goal")))),r.a.createElement("div",{style:{display:this.state.showAutogenerateForm?"block":"none"}},r.a.createElement(x,{toggleAutogenerate:this.toggleAutogenerate})))}}]),t}(r.a.Component),H=Object(d.b)(function(e){return e},function(e){return{changeGoal:function(t){return e({type:"CHANGE_GOAL",payload:t})},updateGoal:function(t){return e(T(t))},createGoal:function(t){return e(L(t))},deleteGoal:function(t){return e(G(t))},editGoal:function(t){return e({type:"EDIT_GOAL",payload:t})},updateDay:function(t){return e(U(t))}}})(B),Y=function(e){return function(t){return t({type:"START_LOADING"}),fetch("".concat(p,"/saveall"),{method:"PATCH",headers:h(),body:JSON.stringify(e)}).then(function(e){return t({type:"STOP_LOADING"})})}},q=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).autoSum=function(e){var t=0;return a.props.choiceFoods.forEach(function(a){var n=a.choice.amount,r=a.measures.find(function(e){return e.id===a.choice.measure_id}),o=n*r.grams/a.food.serving_grams/(r.amount?r.amount:1);t+=parseInt(a.food[e]*o)}),t.toFixed()},a.keyRow=r.a.createElement("ul",{className:"grid key"},r.a.createElement("li",{className:"name"},r.a.createElement("div",null,"Name")),r.a.createElement("li",{className:"amount"},r.a.createElement("div",null,"Amount")),r.a.createElement("li",{className:"measure"},r.a.createElement("div",null,"Measure")),r.a.createElement("li",{className:"macro calories"},r.a.createElement("div",null,"Calories")),r.a.createElement("li",{className:"macro fat"},r.a.createElement("div",null,"Fat")),r.a.createElement("li",{className:"macro carbs"},r.a.createElement("div",null,"Carbs")),r.a.createElement("li",{className:"macro protein"},r.a.createElement("div",null,"Protein")),r.a.createElement("li",{className:"deleteColumn"})),a.compareForStyle=function(e){return a.props.user.email?a.autoSum(e)<a.props.goal[e]-5?"under":a.autoSum(e)>a.props.goal[e]+5?"over":"good":null},a.totalsRow=function(){return r.a.createElement("ul",{className:"grid totalsRow"},r.a.createElement("li",{className:"totals"},r.a.createElement("span",null,"TOTALS:")),r.a.createElement("li",{className:"calories macro",placeholder:"grams"},a.autoSum("calories")),r.a.createElement("li",{className:"fat macro ".concat(a.compareForStyle("fat"))},a.autoSum("fat")),r.a.createElement("li",{className:"carbs macro ".concat(a.compareForStyle("carbs"))},a.autoSum("carbs")),r.a.createElement("li",{className:"protein macro ".concat(a.compareForStyle("protein"))},a.autoSum("protein")),r.a.createElement("li",{className:"deleteColumn"}))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("beforeunload",function(t){e.props.saveAll(e.props)}),document.addEventListener("keydown",function(t){t.metaKey&&"KeyS"===t.code&&(t.preventDefault(),e.props.saveAll(e.props))})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"table"},localStorage.getItem("token")?null:r.a.createElement("div",{className:"welcome"},r.a.createElement("h1",null,"WELCOME TO HAM"),r.a.createElement("h2",null,"a simple macronutrient tracker"),r.a.createElement("hr",null)),r.a.createElement(H,null),this.totalsRow(),this.keyRow,this.props.categories.sort(function(e,t){return e.created_at-t.created_at}).map(function(e){return r.a.createElement(I,{category:e,key:e.id})}),this.keyRow,this.totalsRow(),r.a.createElement("button",{className:"saveButton",onClick:function(){return e.props.saveAll(e.props)}},"Save"),this.props.loading?r.a.createElement("div",{className:"loading"}):null)}}]),t}(r.a.Component),J=Object(d.b)(function(e){return e},function(e){return{addChoices:function(t){return e({type:"ADD_CHOICES",payload:t})},selectUser:function(t){return e({type:"SELECT_USER",payload:t})},editGoal:function(t){return e({type:"EDIT_GOAL",payload:t})},changeGoal:function(t){return e({type:"CHANGE_GOAL",payload:t})},updateGoal:function(t){return e(T(t))},createGoal:function(t){return e(L(t))},saveAll:function(t){return e(Y(t))},editGoalName:function(t){return e({type:"EDIT_GOAL_NAME",payload:t})},deleteGoal:function(t){return e(G(t))}}})(q),W=function(){return function(e){return e({type:"START_LOADING"}),fetch("".concat(p,"/reauth"),{method:"POST",headers:h()}).then(function(e){return e.json()}).then(function(t){e({type:"STOP_LOADING"}),t.user&&t.jwt&&e({type:"SELECT_USER",payload:t})})}},z=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={usernameOrEmail:"",password:"",error:""},a.handleSubmit=function(e){e.preventDefault(),a.state.password&&(a.props.startLoading(),a.props.auth({username_or_email:a.state.usernameOrEmail,password:a.state.password}).then(function(e){return e.json()}).then(function(e){a.props.stopLoading(),e.user&&e.jwt?(localStorage.setItem("token",e.jwt),a.props.selectUser(e)):a.setState({error:e.message})}))},a.handleChange=function(e){a.setState(Object(C.a)({},e.target.name,e.target.value))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{value:this.state.usernameOrEmail,name:"usernameOrEmail",id:"usernameOrEmail",onChange:this.handleChange,type:"text",placeholder:"username/email"}),r.a.createElement("input",{value:this.state.password,name:"password",onChange:this.handleChange,type:"password",placeholder:"password"}),r.a.createElement("input",{value:"Log In",type:"submit",className:"standardButton"}),r.a.createElement("button",{onClick:this.props.toggleSignup,className:"standardButton"},this.props.showSignup?"Close Sign Up":"Sign Up")),this.state.error?r.a.createElement("p",{className:"errorMessage"},this.state.error):null)}}]),t}(r.a.Component),K=Object(d.b)(null,function(e){return{selectUser:function(t){return e({type:"SELECT_USER",payload:t})},startLoading:function(){return e({type:"START_LOADING"})},stopLoading:function(){return e({type:"STOP_LOADING"})},auth:function(t){return e(function(e){return function(t){return t({type:"START_LOADING"}),fetch("".concat(p,"/auth"),{method:"POST",headers:h(),body:JSON.stringify({user:Object(O.a)({},e)})})}}(t))}}})(z),V=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",email:"",password:"",password2:"",error:""},a.handleSubmit=function(e){e.preventDefault(),a.state.password&&a.state.username&&a.state.email?/\w+@\w+\.\w+/.test(a.state.email)?a.state.password!==a.state.password2?a.setState({error:"Passwords must match"}):a.state.password.length<6?a.setState({error:"Password must be at least 6 characters"}):a.props.createUser(a.state):a.setState({error:"Email is invalid"}):a.setState({error:"Username, email, and password required"})},a.handleSignupClick=function(){a.state.signup?(a.signup(),a.setState({password:""})):a.setState({signup:!0})},a.handleChange=function(e){a.setState(Object(C.a)({},e.target.name,e.target.value))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"modal",style:{display:"".concat(this.props.showSignup&&!this.props.user.email?"block":"none")}},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"signupForm"},r.a.createElement("li",null,r.a.createElement("label",null,"Username"),r.a.createElement("br",null),r.a.createElement("input",{value:this.state.username,name:"username",onChange:this.handleChange,type:"text",placeholder:"username"})),r.a.createElement("li",null,r.a.createElement("label",null,"Email"),r.a.createElement("br",null),r.a.createElement("input",{value:this.state.email,name:"email",onChange:this.handleChange,type:"email",placeholder:"email"})),r.a.createElement("li",null,r.a.createElement("label",null,"Password"),r.a.createElement("br",null),r.a.createElement("input",{value:this.state.password,name:"password",onChange:this.handleChange,type:"password",placeholder:"6 characters"})),r.a.createElement("li",null,r.a.createElement("label",null,"Password"),r.a.createElement("br",null),r.a.createElement("input",{value:this.state.password2,name:"password2",onChange:this.handleChange,type:"password",placeholder:"confirm"})),r.a.createElement("li",null,r.a.createElement("input",{value:"Sign Up",type:"submit"}))),this.state.error?r.a.createElement("p",{className:"errorMessage"},this.state.error):null)}}]),t}(r.a.Component),$=Object(d.b)(function(e){return e},function(e){return{selectUser:function(t){return e({type:"SELECT_USER",payload:t})},createUser:function(t){return e(function(e){return function(t){return t({type:"START_LOADING"}),fetch("".concat(p,"/users"),{method:"POST",headers:h(),body:JSON.stringify({user:e})}).then(function(e){return e.json()}).then(function(e){if(t({type:"STOP_LOADING"}),e.user&&e.jwt)return localStorage.setItem("token",e.jwt),t({type:"SELECT_USER",payload:e}),e})}}(t))}}})(V),X=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={showUserInfo:!1,feet:null,inches:null,weight:null,bodyFat:null,age:null,gender:50,activityLevel:1.2},a.handleSubmit=function(e){var t;e.preventDefault(),t=a.state.bodyFat?(a.katchMcArdle()+a.mifflin())/2:a.mifflin(),a.props.createGoal({calories:t.toFixed(),fat:1,carbs:1,protein:1,name:"basal metabolic rate",user_id:a.props.user.id}),a.setState({showUserInfo:!1})},a.katchMcArdle=function(){return(370+21.6*((a.state.weight-a.state.weight*(a.state.bodyFat/100))/2.2))*a.state.activityLevel},a.mifflin=function(){return(10*(a.state.weight/2.2)+6.25*(2.54*(12*a.state.feet+parseInt(a.state.inches)))-5*a.state.age+(a.state.gender/100*166-161))*a.state.activityLevel},a.handleChange=function(e){a.setState(Object(C.a)({},e.target.name,e.target.value))},a.activityLevelSelect=function(){return r.a.createElement("select",{name:"activityLevel",onChange:a.handleChange},[{name:"sedentary",multiplier:1.2},{name:"lightly active",multiplier:1.375},{name:"moderately active",multiplier:1.55},{name:"very active",multiplier:1.725},{name:"extremely active",multiplier:1.9}].map(function(e){return r.a.createElement("option",{name:e.name,value:e.multiplier},e.name)}))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"third centered email",onClick:function(){return e.setState({showUserInfo:!e.state.showUserInfo})}},this.props.user.username," ",this.state.showUserInfo?"\u25b3":"\u25bd"),r.a.createElement("div",{className:"userModal",style:{display:this.state.showUserInfo?"inline":"none"}},r.a.createElement("div",{className:"insideModal"},r.a.createElement("button",{onClick:function(){return e.setState({showUserInfo:!1})},className:"topRightClose closeButton",alt:"Close"},r.a.createElement("img",{src:"close-icon.png",className:"topRightForm closeButton",alt:"Close"})),r.a.createElement("h2",null,"User Info"),r.a.createElement("p",null,"username: ",this.props.user.username),r.a.createElement("p",null,"email: ",this.props.user.email),r.a.createElement("button",{className:"tooltip explanation"}," ?",r.a.createElement("div",{className:"explanationtext"},r.a.createElement("h2",null,"How It Works"),r.a.createElement("p",null,"If you did not supply a body fat percentage, we us the",r.a.createElement("a",{href:"http://www.ksmithwriter.com/Mifflin_Equation_For_Weight_Control.html"},"Mifflin Method")," to calculate your basal metabolic rate (the amount of calories you burn each day). We average the Mifflin Method and the ",r.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Basal_metabolic_rate"},"Katch-McArdle")," Formula if a body fat percentage was present."),r.a.createElement("p",null,"The number we suggest should maintain your weight. To gain or lose weight, change the calories you intake each day. We recommend small changes - 5% or 10% calorie decificts or surpluses at most so your body does not respond negatively. After time, these can be readjusted."),r.a.createElement("h2",null,"Macros: Fat, Carbs, and Protein"),r.a.createElement("p",null,"HAM recommends ",r.a.createElement("a",{href:"https://shapescale.com/blog/health/nutrition/calculate-macronutrient-ratio/"},"shapescale.com")," to help you determine your macronutrient needs."))),r.a.createElement("h2",null,"Generate Macros"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",null,"Height"),r.a.createElement("span",null,r.a.createElement("input",{required:!0,type:"number",min:"1",max:"7",placeholder:"feet",name:"feet",className:"height",onChange:this.handleChange}),r.a.createElement("input",{required:!0,type:"number",min:"0",max:"11",placeholder:"inches",name:"inches",className:"height",onChange:this.handleChange})),r.a.createElement("label",null,"Weight (lbs)"),r.a.createElement("input",{required:!0,type:"number",min:"1",max:"1500",className:"sensitive",placeholder:"hidden",name:"weight",onChange:this.handleChange}),r.a.createElement("label",null,"Body Fat %"),r.a.createElement("input",{type:"number",min:"2",max:"90",className:"sensitive",placeholder:"optional & hidden",name:"bodyFat",onChange:this.handleChange}),r.a.createElement("label",null,"Age"),r.a.createElement("input",{required:!0,type:"number",min:"18",max:"130",pattern:"[0-9]*",placeholder:"age",name:"age",onChange:this.handleChange}),r.a.createElement("label",{className:"gender"},"Gender"),r.a.createElement("span",{className:"gender"},r.a.createElement("label",null,"female"),r.a.createElement("input",Object(C.a)({type:"range",name:"gender",onChange:function(e){return console.log(e.target.value)}},"onChange",this.handleChange)),r.a.createElement("label",null,"male")),r.a.createElement("label",null,"Activity Level"),this.activityLevelSelect(),r.a.createElement("input",{type:"submit",value:"Generate Macros"})))))}}]),t}(r.a.Component),Q=(Object(d.b)(function(e){return{user:e.user}},function(e){return{createGoal:function(t){return e(L(t))}}})(X),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={},a.handleSignOut=function(){a.setState({username:"",email:"",usernameOrEmail:"",password:"",signup:!1,name:null,date:null,editDay:!1}),localStorage.removeItem("token"),a.props.signOut()},a.prettyDayDisplay=function(e){var t=e.date;return"".concat(t.slice(5,7),"-").concat(t.slice(8,10),"-").concat(t.slice(2,4))+(e.name?" ".concat(e.name):"")},a.dayOptions=function(){return a.props.days.sort(function(e,t){return new Date(t.date)-new Date(e.date)}).map(function(e){return r.a.createElement("option",{value:e.id,key:e.id},a.prettyDayDisplay(e))})},a.editDay=function(){a.setState({editDay:!0})},a.handleDayFormChange=function(e){a.setState(Object(C.a)({},e.target.name,e.target.value))},a.updateDay=function(e){if(e.preventDefault(),a.setState({editDay:!1,name:null,date:null}),a.state.name!==a.props.day.name||a.state.date&&a.state.date!==a.props.day.date){var t=Object(O.a)({},a.props.day,{name:a.state.name||a.props.day.name,date:a.state.date||a.props.day.date});a.props.editDay(t),a.props.updateDay(t)}},a.dayChangeHandler=function(e){a.props.saveAll(a.props),a.props.selectDay(e.target.value)},a.todaysDate=function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,n=e.getDate();return a<10&&(a="0".concat(a)),n<10&&(n="0".concat(n)),"".concat(t,"-").concat(a,"-").concat(n)},a.deleteDay=function(){if(a.props.days.length>1&&window.confirm("Are you sure you want to delete this day?")){var e=a.props.days.filter(function(e){return e.id!==a.props.day.id})[0];a.props.selectDay(e.id),a.props.deleteDay(a.props.day.id)}},a.toggleNewFoodForm=function(){a.setState({showNewFoodForm:!a.state.showNewFoodForm})},a.copyDay=function(){a.props.copyDay(a.props.day.id)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"menu"},r.a.createElement("div",{className:"menuButton"},r.a.createElement("img",{src:"menu-icon-white.png",className:"menuButton",alt:"menu button"}),r.a.createElement("div",{className:"sideMenu"},r.a.createElement("ul",{className:"top"},r.a.createElement("li",null,this.props.user.username),r.a.createElement("li",null,this.props.user.email)),r.a.createElement("ul",{className:"bottom"},r.a.createElement("li",{onClick:this.toggleNewFoodForm},"Create Your Own Food"),r.a.createElement(N,{showNewFoodForm:this.state.showNewFoodForm,toggleNewFoodForm:this.toggleNewFoodForm,categoryId:this.props.categories[0].id}),r.a.createElement("li",{className:"contact"},r.a.createElement("a",{href:"mailto:jamesdorr3@gmail.com"},"Contact")),r.a.createElement("li",{className:"signOut",onClick:this.handleSignOut},"Sign Out"))))),r.a.createElement("div",{className:"daySelect"},this.state.editDay?r.a.createElement("form",{className:"dayEdit",onSubmit:this.updateDay},r.a.createElement("input",{type:"text",name:"name",placeholder:"name",defaultValue:this.props.day.name,value:this.state.name,onChange:this.handleDayFormChange}),r.a.createElement("input",{type:"date",name:"date",placeholder:"date",defaultValue:this.props.day.date,value:this.state.date,onChange:this.handleDayFormChange}),r.a.createElement("input",{type:"submit",value:"\u2714"})):r.a.createElement("span",{className:"daySelect"},r.a.createElement("select",{onChange:this.dayChangeHandler,value:this.props.day.id,className:"daySelect"},this.dayOptions()),r.a.createElement("span",{className:"dropdownButton"},r.a.createElement("button",{className:"nonMenu"},"\u22ef"),r.a.createElement("ul",{className:"dropdown"},r.a.createElement("li",{onClick:this.props.createDay},r.a.createElement("button",null,r.a.createElement("img",{src:"add-icon-circle.png",className:"newDay addButton",alt:"add new Day"})),"Add Day"),r.a.createElement("li",{onClick:this.editDay},r.a.createElement("button",null,r.a.createElement("img",{src:"edit-icon.png",className:"editDay editButton",alt:"edit Day"})),"Edit Day"),r.a.createElement("li",{onClick:this.copyDay},r.a.createElement("button",{className:"copyButton"},r.a.createElement("span",{className:"copy"},"\ud834\udf4c")),"Copy Day"),r.a.createElement("li",{onClick:this.deleteDay},r.a.createElement("button",null,r.a.createElement("img",{src:"trash-icon.png",className:"deleteDay deleteButton",alt:"delete Day"})),"Delete Day"))))),r.a.createElement("div",{className:"appName"},r.a.createElement("h1",{className:"appName"},"HAM")))}}]),t}(r.a.Component)),Z=Object(d.b)(function(e){return e},function(e){return{signOut:function(){return e({type:"SIGN_OUT"})},editDay:function(t){return e({type:"EDIT_DAY",payload:t})},updateDay:function(t){return e(U(t))},reauth:function(){return e(W())},createDay:function(){return e(R())},selectDay:function(t){return e(P(t))},saveAll:function(t){return e(Y(t))},startLoading:function(){return e({type:"START_LOADING"})},stopLoading:function(){return e({type:"STOP_LOADING"})},deleteDay:function(t){return e(M(t))},copyDay:function(t){return e(function(e){return function(t){return t({type:"START_LOADING"}),fetch("".concat(p,"days/copy/").concat(e),{headers:h()}).then(function(e){return e.json()}).then(function(e){t({type:"STOP_LOADING"}),t({type:"ADD_DAY",payload:e}),t({type:"SELECT_DAY",payload:e})})}}(t))}}})(Q),ee=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={username:"",email:"",usernameOrEmail:"",password:"",signup:!1,editDayName:!1,showSignup:!1},a.handleSignOut=function(){a.setState({username:"",email:"",usernameOrEmail:"",password:"",signup:!1,editDayName:!1,dayName:""}),localStorage.removeItem("token"),a.props.signOut()},a.toggleSignup=function(e){e.preventDefault(),a.setState({showSignup:!a.state.showSignup})},a.signedIn=function(){return!!a.props.user.email},a.prettyDayDisplay=function(e){var t=new Date(e.created_at);return"".concat(t.getMonth()+1,"-").concat(t.getDate(),"-").concat(t.getFullYear())+(e.name?" ".concat(e.name):"")},a.dayOptions=function(){return a.props.days.sort(function(e,t){return new Date(t.created_at)-new Date(e.created_at)}).map(function(e){return r.a.createElement("option",{value:e.id,key:e.id},a.prettyDayDisplay(e))})},a.editDayToggle=function(){a.setState({editDayName:!a.state.editDayName})},a.handleDayNameChange=function(e){a.setState({dayName:e.target.value})},a.dayChangeHandler=function(e){a.props.saveAll(a.props),a.props.selectDay(e.target.value)},a.todaysDate=function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,n=e.getDate();return a<10&&(a="0".concat(a)),n<10&&(n="0".concat(n)),"".concat(t,"-").concat(a,"-").concat(n)},a.deleteDay=function(){if(a.props.days.length>1&&window.confirm("Are you sure you want to delete this day?")){var e=a.props.days.filter(function(e){return e.id!==a.props.day.id})[0];a.props.selectDay(e.id),a.props.deleteDay(a.props.day.id)}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){localStorage.getItem("token")&&this.props.reauth()}},{key:"render",value:function(){return r.a.createElement("div",{className:"notSignedInHeader"},r.a.createElement("div",{className:"notSignedInMessage"},r.a.createElement("p",null,"Use HAM free. Log in to record data")),r.a.createElement("div",{className:"login"},r.a.createElement(K,{showSignup:this.state.showSignup,toggleSignup:this.toggleSignup,handleChange:this.handleChange,login:this.login}),r.a.createElement($,{showSignup:this.state.showSignup,toggleSignup:this.toggleSignup})))}}]),t}(r.a.Component),te=Object(d.b)(function(e){return e},function(e){return{signOut:function(){return e({type:"SIGN_OUT"})},reauth:function(){return e(W())},createDay:function(){return e(R())},selectDay:function(t){return e(P(t))},editDayName:function(t){return e({type:"EDIT_DAY_NAME",payload:t})},saveAll:function(t){return e(Y(t))},startLoading:function(){return e({type:"START_LOADING"})},stopLoading:function(){return e({type:"STOP_LOADING"})},deleteDay:function(t){return e(M(t))}}})(ee),ae=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={username:"",email:"",usernameOrEmail:"",password:"",signup:!1,editDayName:!1,showSignup:!1},a.handleSignOut=function(){a.setState({username:"",email:"",usernameOrEmail:"",password:"",signup:!1,editDayName:!1,dayName:""}),localStorage.removeItem("token"),a.props.signOut()},a.toggleSignup=function(e){e.preventDefault(),a.setState({showSignup:!a.state.showSignup})},a.prettyDayDisplay=function(e){var t=new Date(e.created_at);return"".concat(t.getMonth()+1,"-").concat(t.getDate(),"-").concat(t.getFullYear())+(e.name?" ".concat(e.name):"")},a.dayOptions=function(){return a.props.days.sort(function(e,t){return new Date(t.created_at)-new Date(e.created_at)}).map(function(e){return r.a.createElement("option",{value:e.id,key:e.id},a.prettyDayDisplay(e))})},a.editDayToggle=function(){a.setState({editDayName:!a.state.editDayName})},a.handleDayNameChange=function(e){a.setState({dayName:e.target.value})},a.dayChangeHandler=function(e){a.props.saveAll(a.props),a.props.selectDay(e.target.value)},a.todaysDate=function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,n=e.getDate();return a<10&&(a="0".concat(a)),n<10&&(n="0".concat(n)),"".concat(t,"-").concat(a,"-").concat(n)},a.deleteDay=function(){if(a.props.days.length>1&&window.confirm("Are you sure you want to delete this day?")){var e=a.props.days.filter(function(e){return e.id!==a.props.day.id})[0];a.props.selectDay(e.id),a.props.deleteDay(a.props.day.id)}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){localStorage.getItem("token")&&this.props.reauth()}},{key:"render",value:function(){return localStorage.getItem("token")?r.a.createElement(Z,null):r.a.createElement(te,null)}}]),t}(r.a.Component),ne=Object(d.b)(function(e){return e},function(e){return{signOut:function(){return e({type:"SIGN_OUT"})},reauth:function(){return e(W())},createDay:function(){return e(R())},selectDay:function(t){return e(P(t))},editDayName:function(t){return e({type:"EDIT_DAY_NAME",payload:t})},saveAll:function(t){return e(Y(t))},startLoading:function(){return e({type:"START_LOADING"})},stopLoading:function(){return e({type:"STOP_LOADING"})},deleteDay:function(t){return e(M(t))},updateDay:function(t){return e(U(t))}}})(ae),re=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"footer"},r.a.createElement("a",{href:"http://ndb.nal.usda.gov",className:"attribution"},r.a.createElement("div",{className:"small"},"Powered by the"),r.a.createElement("h2",null,"USDA")),r.a.createElement("span",{className:"hidden"},"Powered by the U.S. Department of Agriculture, Agricultural Research Service, 2019 ",r.a.createElement("br",null)," USDA Branded Food Products Database - Nutrient Data Laboratory Home Page http://ndb.nal.usda.gov"))}}]),t}(r.a.Component),oe=Object(d.b)(null,function(e){return{addChoice:function(t){return e({type:"ADD_CHOICES",payload:[t]})},selectSearchResult:function(t){return e(f(t))}}})(re),le=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onDragEnd=function(e){var t=e.destination,n=e.draggableId;if(t){var r=a.props.choiceFoods.find(function(e){return e.choice.id===n}),o=t.droppableId,l=a.props.choiceFoods.filter(function(e){return e.choice.category_id===o}).sort(function(e,t){return e.choice.index-t.choice.index}).map(function(e){return e.choice.id});if(r.choice.category_id===o){var c=l.indexOf(r.choice.id);l.splice(c,1)}l.splice(t.index,0,r.choice.id),l.forEach(function(e,t){a.props.editChoice({choice:{id:e,index:t,category_id:o}})})}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(ne,null),r.a.createElement(w.a,{onDragEnd:this.onDragEnd},r.a.createElement(J,null)),r.a.createElement("div",{className:"loading",style:{display:this.props.loading?"block":"none"}}),r.a.createElement("div",{className:"footerSearch"},r.a.createElement(j,null)),r.a.createElement(oe,null))}}]),t}(r.a.Component),ce=Object(d.b)(function(e){return e},function(e){return{handleDrop:function(t,a,n){return e({type:"HANDLE_DROP",payload:{choicesIds:t,choiceId:a,categoryId:n}})},updateIndex:function(t){return e({type:"UPDATE_INDEX",payload:t})},updateCategory:function(t,a){return e({type:"UPDATE_CATEGORY",payload:{choiceId:t,categoryId:a}})},editChoice:function(t){return e({type:"EDIT_CHOICE",payload:t})}}})(le);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ie=a(9),se=a(10),ue={categories:[{name:"Breakfast",created_at:1,id:1},{name:"Lunch",created_at:2,id:2},{name:"Dinner",created_at:3,id:3}],day:{},days:[],choiceFoods:[],goal:{},goals:[],user:{},error:{},loading:!1,removed:[]},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CHOICE":return Object(O.a)({},e,{choiceFoods:[].concat(Object(se.a)(e.choiceFoods),[{choice:Object(O.a)({},t.payload.choice,{id:t.payload.choice.id||Date.now()}),food:t.payload.food,measures:t.payload.measures}])});case"ADD_CHOICES":return Object(O.a)({},e,{choiceFoods:[].concat(Object(se.a)(e.choiceFoods),Object(se.a)(t.payload))});case"DELETE_CHOICE":var a=e.choiceFoods.find(function(e){return e.choice.id===t.payload});return Object(O.a)({},e,{choiceFoods:e.choiceFoods.filter(function(e){return e.choice.id!==t.payload}),removed:[].concat(Object(se.a)(e.removed.filter(function(e){return e.id!==a.food.id})),[a.food])});case"SELECT_USER":return Object(O.a)({},e,{categories:t.payload.user.categories,choiceFoods:t.payload.user.choice_foods,day:t.payload.user.day,days:t.payload.user.days,goal:t.payload.user.goal,goals:t.payload.user.goals,user:{email:t.payload.user.email,id:t.payload.user.id,username:t.payload.user.username}});case"EDIT_GOAL":return Object(O.a)({},e,{goal:Object(O.a)({},e.goal,t.payload),goals:[].concat(Object(se.a)(e.goals.filter(function(t){return t.id!==e.goal.id})),[Object(O.a)({},e.goal,t.payload)])});case"CHANGE_GOAL":var n=t.payload,r=e.goals.find(function(e){return e.id===parseInt(n)});return Object(O.a)({},e,{goal:r});case"SIGN_OUT":return Object(O.a)({},e,{choiceFoods:[],goal:{},goals:[],user:{}});case"HANDLE_DROP":var o=function(){for(var a=[],n=t.payload.choicesIds,r=function(t){var r=e.choiceFoods.find(function(e){return e.choice.id===parseInt(n[t])});a.push(Object(O.a)({},r,{choice:Object(O.a)({},r.choice,{index:t})}))},o=0;o<n.length;o++)r(o);return a.find(function(e){return e.choice.id===t.payload.choiceId}).choice.category_id=t.payload.categoryId,{v:Object(O.a)({},e,{choiceFoods:a})}}();if("object"===typeof o)return o.v;case"ADD_DAY":return Object(O.a)({},e,{choiceFoods:[],day:t.payload,days:[].concat(Object(se.a)(e.days),[Object(O.a)({},t.payload,{goal_id:t.payload.goal.id})]),goal:t.payload.goal});case"SELECT_DAY":return Object(O.a)({},e,{choiceFoods:t.payload.choice_foods,day:{date:t.payload.date,id:t.payload.id,name:t.payload.name},goal:t.payload.goal});case"ADD_FOOD":return Object(O.a)({},e,{choiceFoods:[].concat(Object(se.a)(e.choiceFoods),[t.payload])});case"EDIT_CHOICE":var l=e.choiceFoods.find(function(e){return e.choice.id===t.payload.choice.id});return Object(O.a)({},e,{choiceFoods:[].concat(Object(se.a)(e.choiceFoods.filter(function(e){return parseInt(e.choice.id)!==parseInt(l.choice.id)})),[Object(O.a)({},l,{choice:Object(O.a)({},l.choice,t.payload.choice)})])});case"EDIT_DAY":return Object(O.a)({},e,{day:Object(O.a)({},e.day,t.payload),days:[].concat(Object(se.a)(e.days.filter(function(t){return t.id!==e.day.id})),[Object(O.a)({},e.day,t.payload)])});case"ADD_GOAL":return Object(O.a)({},e,{goal:t.payload,goals:[].concat(Object(se.a)(e.goals),[t.payload])});case"START_LOADING":return Object(O.a)({},e,{loading:!0});case"STOP_LOADING":return Object(O.a)({},e,{loading:!1});case"DELETE_DAY":return Object(O.a)({},e,{days:e.days.filter(function(e){return e.id!==parseInt(t.payload)})});case"DELETE_GOAL":return Object(O.a)({},e,{goals:e.goals.filter(function(e){return e.id!==parseInt(t.payload)})});default:return e}},de=a(47),pe=Object(ie.d)(me,Object(ie.a)(de.a));l.a.render(r.a.createElement(d.a,{store:pe},r.a.createElement(ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[48,1,2]]]);
//# sourceMappingURL=main.9836e046.chunk.js.map