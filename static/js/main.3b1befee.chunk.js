(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{48:function(e,t,a){e.exports=a(93)},53:function(e,t,a){},54:function(e,t,a){},93:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(21),l=a.n(o),c=(a(53),a(3)),i=a(4),s=a(6),u=a(5),m=a(7),d=(a(54),a(2)),p="https://ham-backend.herokuapp.com/",h=function(){return{"Content-Type":"application/json",Accept:"application/json",Authorization:localStorage.getItem("token")?"BEARER ".concat(localStorage.getItem("token")):null}},g=function(e){return function(t){return t({type:"START_LOADING"}),fetch("".concat(p,"search/make_choice"),{method:"POST",headers:h(),body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){t({type:"STOP_LOADING"}),t({type:"ADD_CHOICE",payload:e})})}},f=Object(d.b)(function(e){return{day:e.day}},function(e){return{selectInternalSearchResult:function(t){return e((a=t,function(e){return e({type:"START_LOADING"}),fetch("".concat(p,"/choices"),{method:"POST",headers:h(),body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(t){e({type:"STOP_LOADING"}),e({type:"ADD_CHOICE",payload:t})})}));var a},selectSearchResult:function(t){return e(g(t))}}})(function(e){return r.a.createElement("li",{className:"searchResult",onClick:function(){e.hideResults(),e.clearForm(),e.food.id?e.selectInternalSearchResult({foodId:e.food.id,categoryId:e.categoryId,dayId:e.day.id}):e.selectSearchResult({fdcId:e.food.fdcId,categoryId:e.categoryId,dayId:e.day.id})}},r.a.createElement("span",{className:"resultName"},e.food.name||e.food.description),e.food.brand?r.a.createElement("span",{className:"brandName"}," - ",e.food.brand):null,e.food.brandOwner?r.a.createElement("span",{className:"brandName"}," - ",e.food.brandOwner):null,e.food.fat||e.food.carbs||e.food.protein?r.a.createElement("ul",{className:"resultMacros"},r.a.createElement("li",null,"fat: ",e.food.fat.toFixed()),r.a.createElement("li",null,"carbs: ",e.food.carbs.toFixed()),r.a.createElement("li",null,"protein: ",e.food.protein.toFixed())):null)}),y=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={text:"",favorites:[],filteredFavorites:[],common:[],internal:[],error:!1,addFood:!1,currentPage:0,totalPages:0,showResults:!1},a.componentDidMount=function(){a.props.foodsIndex("").then(function(e){return e.json()}).then(function(e){a.setState({favorites:e.favorites})})},a.foodsIndex=function(e){a.props.foodsIndex(e).then(function(e){return e.json()}).then(function(e){a.setState({filteredFavorites:e.favorites})})},a.handleChange=function(e){a.setState({text:e.target.value}),0===e.target.value.length&&(a.foodsIndex(""),a.clearResults())},a.internalSearch=function(e){a.props.internalSearch(e).then(function(e){return e.json()}).then(function(e){e.internal.length>0?a.setState({internal:e.internal}):a.setState({internal:[]})})},a.handleSubmit=function(e){e.preventDefault();var t=a.state.text.replace("%","");t&&(a.setState({common:[]}),a.props.startLoading(),a.foodsIndex(t),a.externalSearch(t,1))},a.clearResults=function(){a.setState({filteredFavorites:[],branded:[],common:[],internal:[],text:"",error:!1,currentPage:0,totalPages:0})},a.categoryByTime=function(){var e=(new Date).getHours();return e<9?a.props.categories.find(function(e){return"Breakfast"===e.name}).id:e<16?a.props.categories.find(function(e){return"Lunch"===e.name}).id:a.props.categories.find(function(e){return"Dinner"===e.name}).id},a.makeSearchResultCard=function(e){return r.a.createElement(f,{categoryId:a.categoryByTime(),key:e.id,food:e,clearForm:a.clearResults,hideResults:a.hideResults})},a.showResults=function(){a.setState({showResults:!0})},a.hideResults=function(){a.setState({showResults:!1})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"externalSearch",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.props.externalSearch(e,a).then(function(e){return e.json()}).then(function(e){t.props.stopLoading(),e.common&&e.common.length>0?t.setState({common:t.state.common.concat(e.common),currentPage:e.current_page,totalPages:e.total_pages}):t.setState({error:"No More Results"})})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"arrow",style:{display:this.props.choiceFoods.length>0?"none":"block"}},r.a.createElement("span",{className:"rectangle"},"Start Here")),r.a.createElement("div",{className:"centered row foodSearchContainer",onFocus:this.showResults},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"searchForm"},r.a.createElement("input",{type:"search",value:this.state.text,onChange:this.handleChange,placeholder:"Search for any food...",className:"searchText"}),r.a.createElement("input",{type:"image",src:"search-icon.png",alt:"Search",name:"submit",className:"searchButton searchIcon"})),r.a.createElement("ul",{className:this.state.showResults?"searchResultContainer":"searchResultContainerHidden"},r.a.createElement("h5",null,"Favorites"),this.state[this.state.filteredFavorites.length>0||""!==this.state.text?"filteredFavorites":"favorites"].map(function(t){return e.makeSearchResultCard(t)}),r.a.createElement("h5",null,"More Results"),this.state.internal.map(function(t){return e.makeSearchResultCard(t)}),this.state.common.map(function(t){return e.makeSearchResultCard(t)}),this.state.currentPage<this.state.totalPages?r.a.createElement("li",{className:"searchResult loadMore",onClick:function(){return e.externalSearch(e.state.text,e.state.currentPage+1)}},"Load More - Showing ",(this.state.currentPage/this.state.totalPages*100).toFixed(),"% of results"):null,this.props.removed.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("h5",null,"Recently Deleted"),this.props.removed.map(function(t){return e.makeSearchResultCard(t)})):null,this.state.error?r.a.createElement("li",null,this.state.error):null)))}}]),t}(r.a.Component),E=Object(d.b)(function(e){return e},function(e){return{startLoading:function(){return e({type:"START_LOADING"})},stopLoading:function(){return e({type:"STOP_LOADING"})},internalSearch:function(t){return e(function(e){return function(t){return fetch("".concat(p,"search/internal_search?q=").concat(e),{headers:h()})}}(t))},externalSearch:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(a){return fetch("".concat(p,"search/many?q=").concat(e,"&pageNumber=").concat(t),{headers:h()})}}(t,a))},foodsIndex:function(t){return e(function(e){return function(t){return fetch("".concat(p,"/foods?q=").concat(e),{headers:h()})}}(t))}}})(y),b=a(14),v=a(1),O=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={amount:a.props.choiceFood.choice.amount,measure:a.props.choiceFood.choice.measure,className:"choice grid"},a.autoUpdateMacro=function(e){var t=a.props.choiceFood.choice.amount,n=a.props.choiceFood.measures.find(function(e){return e.id===a.props.choiceFood.choice.measure_id}),r=t*n.grams/a.props.choiceFood.food.serving_grams/(n.amount?n.amount:1);return(a.props.choiceFood.food[e]*r).toFixed()},a.updateInDB=function(){a.props.updateChoice(Object(v.a)({},a.props.choiceFood.choice))},a.handleAmountChange=function(e){if(e.target.value>=0){var t=a.props.choiceFood.choice.id;a.setState({amount:e.target.value}),a.props.editChoice({choice:{amount:e.target.value,id:t}})}},a.handleMeasureChange=function(e){a.props.editChoice({choice:{measure_id:parseInt(e.target.value),id:a.props.choiceFood.choice.id}}),a.updateInDB()},a.generateMeasures=function(){return a.props.choiceFood.measures.sort(function(e,t){return e.name-t.name}).map(function(e){return r.a.createElement("option",{value:e.id,key:e.id},e.name)})},a.deleteChoice=function(){a.setState({className:"grid shrunk"}),setTimeout(function(){var e=a.props.choiceFood.choice.id;a.props.deleteChoice(e),a.props.destroyChoice(e)},500)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({className:"grid toExpand"}),setTimeout(function(){e.setState({className:"choice grid"})},500)}},{key:"render",value:function(){var e=this;return r.a.createElement(b.b,{draggableId:this.props.choiceFood.choice.id,index:this.props.index},function(t){return r.a.createElement("ul",Object.assign({className:e.state.className},t.draggableProps,t.dragHandleProps,{ref:t.innerRef,id:e.props.choiceFood.choice.id}),r.a.createElement("li",{className:"name"},r.a.createElement("span",{className:"nameScroll"},e.props.choiceFood.food.name,e.props.choiceFood.food.brand?" - ".concat(e.props.choiceFood.food.brand):null)),r.a.createElement("li",{className:"amount"},r.a.createElement("input",{type:"number",ref:function(t){e.amountInput=t},min:"0",name:"amount",value:e.props.choiceFood.choice.amount,onChange:e.handleAmountChange,onBlur:e.updateInDB})),r.a.createElement("li",{className:"measure"},r.a.createElement("select",{className:"",value:e.props.choiceFood.choice.measure_id,onChange:e.handleMeasureChange,name:"measure"},e.generateMeasures())),r.a.createElement("li",{className:"macro calories"},e.autoUpdateMacro("calories")),r.a.createElement("li",{className:"macro fat"},e.autoUpdateMacro("fat")),r.a.createElement("li",{className:"macro carbs"},e.autoUpdateMacro("carbs")),r.a.createElement("li",{className:"macro protein"},e.autoUpdateMacro("protein")),r.a.createElement("li",{className:"deleteColumn"},r.a.createElement("button",{onClick:e.deleteChoice,className:"deleteChoice deleteButton",alt:"delete choice"},r.a.createElement("img",{src:"trash-icon.png",className:"deleteChoice",alt:"delete choice"}))))})}}]),t}(r.a.Component),N=Object(d.b)(null,function(e){return{deleteChoice:function(t){return e({type:"DELETE_CHOICE",payload:t})},editChoice:function(t){return e({type:"EDIT_CHOICE",payload:t})},updateChoice:function(t){return e((a=t,function(e){return fetch("".concat(p,"choices/").concat(a.id),{method:"PATCH",headers:h(),body:JSON.stringify({choice:a})})}));var a},destroyChoice:function(t){return e((a=t,function(e){return fetch("".concat(p,"/choices/").concat(a),{method:"DELETE"})}));var a}}})(O),S=Object(d.b)(function(e){return{choiceFoods:e.choiceFoods}},function(e){return{}})(function(e){var t=function(t){var a=0;return e.choiceFoods.filter(function(t){return t.choice.category_id===e.category.id}).forEach(function(e){var n=e.choice.amount,r=e.measures.find(function(t){return t.id===e.choice.measure_id}),o=n*r.grams/e.food.serving_grams/(r.amount?r.amount:1);a+=parseInt(e.food[t]*o)}),a.toFixed()};return r.a.createElement(b.c,{droppableId:e.category.id},function(a){return r.a.createElement("div",Object.assign({className:"category",ref:a.innerRef},a.droppableProps),r.a.createElement("p",{className:"name categoryName"},e.category.name),e.choiceFoods.filter(function(t){return t.choice.category_id===e.category.id}).sort(function(e,t){return e.choice.index-t.choice.index}).map(function(t,a){return r.a.createElement(N,{choiceFood:t,key:t.choice.id,index:a,deleteChoice:e.deleteChoice})}),a.placeholder,r.a.createElement("ul",{className:"grid categoryGrid"},r.a.createElement("li",{className:"name categoryName"}),r.a.createElement("li",{className:"subtotals"},"Subtotals: "),r.a.createElement("li",{className:"calories macro"},t("calories")),r.a.createElement("li",{className:"fat macro"},t("fat")),r.a.createElement("li",{className:"carbs macro"},t("carbs")),r.a.createElement("li",{className:"protein macro"},t("protein")),r.a.createElement("li",{className:"deleteColumn"})))})}),D=a(8),C=function(e){return function(t){return t({type:"START_LOADING"}),t({type:"EDIT_GOAL",payload:e}),fetch("".concat(p,"/goals/").concat(e.id),{method:"PATCH",headers:h(),body:JSON.stringify({goal:e})}).then(function(e){return t({type:"STOP_LOADING"})})}},w=function(e){return function(t){return t({type:"START_LOADING"}),fetch("".concat(p,"/goals"),{method:"POST",headers:h(),body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){t({type:"STOP_LOADING"}),t({type:"ADD_GOAL",payload:e})})}},A=function(e){return function(t){return fetch("".concat(p,"/goals/").concat(e),{method:"DELETE",headers:h()}).then(function(a){return t({type:"DELETE_GOAL",payload:e})})}},_=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={showUserInfo:!1,feet:null,inches:null,weight:null,bodyFat:null,age:null,gender:50,activityLevel:1.2,calorieGoalAdjuster:1,macroGoal:"high protein - lift day",fat:40,carbs:30,protein:30},a.handleSubmit=function(e){var t,n;e.preventDefault(),t=a.state.bodyFat?(a.katchMcArdle()+a.mifflin())/2:a.mifflin(),t*=parseFloat(a.state.calorieGoalAdjuster),n=a.state.calorieGoalAdjuster>1?"gain weight":a.state.calorieGoalAdjuster<1?"lose weight":"maintain weight",a.props.createGoal({calories:t.toFixed(),fat:(t*parseInt(a.state.fat)/900).toFixed(),carbs:(t*parseInt(a.state.carbs)/400).toFixed(),protein:(t*parseInt(a.state.protein)/400).toFixed(),name:"".concat(a.state.macroGoal," to ").concat(n),user_id:a.props.user.id}),a.props.toggleAutogenerate()},a.katchMcArdle=function(){return(370+21.6*((a.state.weight-a.state.weight*(a.state.bodyFat/100))/2.2))*a.state.activityLevel},a.mifflin=function(){return(10*(a.state.weight/2.2)+6.25*(2.54*(12*a.state.feet+parseInt(a.state.inches)))-5*a.state.age+(a.state.gender/100*166-161))*a.state.activityLevel},a.handleChange=function(e){a.setState(Object(D.a)({},e.target.name,e.target.value))},a.activityLevelSelect=function(){return r.a.createElement("select",{value:a.state.activityLevel,className:"activityLevel",name:"activityLevel",onChange:a.handleChange},[{name:"0 times",oldName:"Sedentary - little or no exercise, desk job",multiplier:1.2},{name:"lightly 1 to 3 times",oldName:"lightly active - light exercise, sports 1-3 days a week",multiplier:1.375},{name:"moderately 3 to 5 times",oldName:"moderately active - moderate exercise, sports 3-5 days a week",multiplier:1.55},{name:"hard 6 to 7 times",oldName:"very active - hard exercise, sports 6-7 days a week",multiplier:1.725},{name:"extremely hard, at least every day",oldName:"extremely active - hard daily exercise, sports and physical job, or 2x a day exercise",multiplier:1.9}].map(function(e){return r.a.createElement("option",{name:e.name,key:e.name,value:e.multiplier},e.name)}))},a.calorieGoalAdjusterSelect=function(){return r.a.createElement("select",{value:a.state.calorieGoalAdjuster,name:"calorieGoalAdjuster",onChange:a.handleChange},[{name:"gain weight: +5% calories",multiplier:1.05},{name:"maintain weight",multiplier:1},{name:"lose weight: -5% calories",multiplier:.95}].map(function(e){return r.a.createElement("option",{name:e.name,key:e.name,value:e.multiplier,id:e.multiplier},e.name)}))},a.macroGoalsSelect=function(){var e=[{name:"high protein - rest day",fat:45,carbs:20,protein:35},{name:"high protein - lift day",fat:40,carbs:30,protein:30},{name:"keto - low carb",fat:60,carbs:5,protein:35},{name:"moderate-carb / paleo",fat:40,carbs:30,protein:30},{name:"shipscale.com weightloss and muscle gain",fat:35,carbs:30,protein:35},{name:"myFitnessPal",fat:30,carbs:50,protein:20}];return r.a.createElement("select",{value:a.state.macroGoal,name:"macroGoal",onChange:function(t){a.handleChange(t);var n=e.filter(function(e){return e.name===t.target.value})[0];a.setState({fat:n.fat,carbs:n.carbs,protein:n.protein})}},e.map(function(e){return r.a.createElement("option",{name:e.name,key:e.name,value:e.name},e.name)}))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"autogenerateMacros"},r.a.createElement("h2",null,"Generate Macros"),r.a.createElement("button",{onClick:this.props.toggleAutogenerate},"close"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",null,r.a.createElement("label",null,"Height"),r.a.createElement("span",null,r.a.createElement("input",{required:!0,type:"number",min:"1",max:"7",placeholder:"feet",name:"feet",className:"height",onChange:this.handleChange}),r.a.createElement("input",{required:!0,type:"number",min:"0",max:"11",placeholder:"inches",name:"inches",className:"height",onChange:this.handleChange}))),r.a.createElement("div",null,r.a.createElement("label",null,"Weight (lbs)"),r.a.createElement("input",{required:!0,type:"number",min:"1",max:"1500",className:"sensitive",placeholder:"pounds",name:"weight",onChange:this.handleChange})),r.a.createElement("div",null,r.a.createElement("label",null,"Body Fat %"),r.a.createElement("input",{type:"number",min:"2",max:"90",className:"sensitive",placeholder:"(optional)",name:"bodyFat",onChange:this.handleChange})),r.a.createElement("div",null,r.a.createElement("label",null,"Age"),r.a.createElement("input",{required:!0,type:"number",min:"18",max:"130",pattern:"[0-9]*",placeholder:"age",name:"age",onChange:this.handleChange})),r.a.createElement("label",{className:"gender"},"Gender"),r.a.createElement("div",null,r.a.createElement("span",{className:"gender"},r.a.createElement("label",null,"female"),r.a.createElement("input",{type:"range",name:"gender",onChange:this.handleChange}),r.a.createElement("label",null,"male"))),r.a.createElement("div",null,r.a.createElement("label",null,"exercise per week"),this.activityLevelSelect()),r.a.createElement("div",null,r.a.createElement("label",null,"Calorie Goal"),this.calorieGoalAdjusterSelect()),r.a.createElement("div",null,r.a.createElement("label",null,"Macro Profile"),this.macroGoalsSelect()),r.a.createElement("div",null,r.a.createElement("label",null,"% calories from"),r.a.createElement("label",{className:"macrosForAutogenerate"},"Fat"),r.a.createElement("input",{className:"macrosForAutogenerate",name:"fat",type:"number",value:this.state.fat,onChange:this.handleChange}),r.a.createElement("label",{className:"macrosForAutogenerate"},"carbs"),r.a.createElement("input",{className:"macrosForAutogenerate",name:"carbs",type:"number",value:this.state.carbs,onChange:this.handleChange}),r.a.createElement("label",{className:"macrosForAutogenerate"},"protein"),r.a.createElement("input",{className:"macrosForAutogenerate",name:"protein",type:"number",value:this.state.protein,onChange:this.handleChange})),r.a.createElement("div",null,r.a.createElement("label",{id:"autoMacrosSum"},"Total"),parseInt(this.state.fat)+parseInt(this.state.carbs)+parseInt(this.state.protein),"%"),r.a.createElement("input",{type:"submit",value:"Generate Macros"})))}}]),t}(r.a.Component),j=Object(d.b)(function(e){return{user:e.user}},function(e){return{createGoal:function(t){return e(w(t))}}})(_),F=function(){return function(e){return e({type:"START_LOADING"}),fetch("".concat(p,"/days"),{method:"POST",headers:h(),body:JSON.stringify({date:(new Date).toLocaleString()})}).then(function(e){return e.json()}).then(function(t){e({type:"STOP_LOADING"}),e({type:"ADD_DAY",payload:t})})}},I=function(e){return function(t){return t({type:"START_LOADING"}),fetch("".concat(p,"/days/").concat(e),{headers:h()}).then(function(e){return e.json()}).then(function(e){t({type:"STOP_LOADING"}),t({type:"SELECT_DAY",payload:e})})}},G=function(e){return function(t){return t({type:"DELETE_DAY",payload:e}),fetch("".concat(p,"/days/").concat(e),{method:"DELETE",headers:h()})}},T=function(e){return function(t){return fetch("".concat(p,"days/").concat(e.id),{method:"PATCH",headers:h(),body:JSON.stringify(e)})}},L=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={showEditGoalForm:!1},a.goalsSelector=function(){var e=a.props.goals.sort(function(e,t){return e.name.toLowerCase()>t.name.toLowerCase()?1:e.name.toLowerCase()<t.name.toLowerCase()?-1:0});return r.a.createElement("select",{value:a.props.goal.id,className:"goalsSelect",onChange:a.changeGoal},e.map(function(e){return r.a.createElement("option",{value:e.id,key:e.id},e.name)}))},a.changeGoal=function(e){a.props.changeGoal(e.target.value),a.props.updateDay({id:a.props.day.id,goal_id:e.target.value})},a.addGoal=function(){a.props.createGoal({user_id:a.props.user.id,name:"new goal",calories:1,fat:1,carbs:1,protein:1}).then(a.editGoal)},a.editGoal=function(){a.setState({showEditGoalForm:!0})},a.deleteGoal=function(){a.props.goals.length>1&&a.props.deleteGoal(a.props.goal.id)},a.handleSubmit=function(e){e.preventDefault(),a.setState({showEditGoalForm:!1}),a.props.updateGoal(a.props.goal)},a.handleChange=function(e){if("calories"===e.target.name)a.props.editGoal(Object(D.a)({},e.target.name,e.target.value));else{var t,n=Object(v.a)({},a.props.goal,Object(D.a)({},e.target.name,e.target.value));a.props.editGoal((t={},Object(D.a)(t,e.target.name,e.target.value),Object(D.a)(t,"calories",9*parseInt(n.fat)+4*parseInt(n.carbs)+4*parseInt(n.protein)),t))}},a.toggleAutogenerate=function(){a.setState({showAutogenerateForm:!a.state.showAutogenerateForm})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.state.showEditGoalForm?r.a.createElement("form",{className:"grid goals",onSubmit:this.handleSubmit},r.a.createElement("li",{className:"goalsTitle"},r.a.createElement("div",null,"Edit Goal:")),r.a.createElement("li",{className:"goalsSelect"},r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"name",placeholder:"name",defaultValue:this.props.goal.name,value:this.state.name,onChange:this.handleChange}))),r.a.createElement("li",{className:"macro calories"},r.a.createElement("div",null,r.a.createElement("input",{value:this.props.goal.calories,className:"readonly",readonly:!0}))),r.a.createElement("li",{className:"macro fat"},r.a.createElement("div",null,r.a.createElement("input",{type:"number",name:"fat",min:"0",placeholder:"grams",value:this.props.goal.fat,onChange:this.handleChange}))),r.a.createElement("li",{className:"macro carbs"},r.a.createElement("div",null,r.a.createElement("input",{type:"number",name:"carbs",min:"0",placeholder:"grams",value:this.props.goal.carbs,onChange:this.handleChange}))),r.a.createElement("li",{className:"macro protein"},r.a.createElement("div",null,r.a.createElement("input",{type:"number",name:"protein",min:"0",placeholder:"grams",value:this.props.goal.protein,onChange:this.handleChange}))),r.a.createElement("li",{className:"submitGoal"},r.a.createElement("input",{className:"submitGoal",type:"submit",value:"\u2714"}))):r.a.createElement("ul",{className:"grid goals"},r.a.createElement("li",{className:"goalsTitle"},r.a.createElement("div",null,"Goals:")),r.a.createElement("li",{className:"goalsSelect"},r.a.createElement("div",null,this.goalsSelector())),r.a.createElement("li",{className:"macro calories"},r.a.createElement("div",null,this.props.goal.calories)),r.a.createElement("li",{className:"macro fat"},r.a.createElement("div",null,this.props.goal.fat)),r.a.createElement("li",{className:"macro carbs"},r.a.createElement("div",null,this.props.goal.carbs)),r.a.createElement("li",{className:"macro protein"},r.a.createElement("div",null,this.props.goal.protein)),r.a.createElement("span",{className:"dropdownButton"},r.a.createElement("span",null,"\u22ef"),r.a.createElement("ul",{className:"dropdown"},r.a.createElement("li",{onClick:this.addGoal},r.a.createElement("button",null,r.a.createElement("img",{src:"add-icon-circle.png",className:"newGoal addButton",alt:"add new goal"})),"Add Goal"),r.a.createElement("li",{onClick:this.editGoal},r.a.createElement("button",null,r.a.createElement("img",{src:"edit-icon.png",className:"editGoal editButton",alt:"edit goal"})),"Edit Goal"),r.a.createElement("li",{onClick:this.deleteGoal},r.a.createElement("button",null,r.a.createElement("img",{src:"trash-icon.png",className:"deleteChoice deleteButton",alt:"delete choice"})),"Delete Goal"),r.a.createElement("li",{onClick:this.toggleAutogenerate},r.a.createElement("button",null,"\u267e"),"Autogenerate Goal")))),r.a.createElement("div",{style:{display:this.state.showAutogenerateForm?"block":"none"}},r.a.createElement(j,{toggleAutogenerate:this.toggleAutogenerate})))}}]),t}(r.a.Component),k=Object(d.b)(function(e){return e},function(e){return{changeGoal:function(t){return e({type:"CHANGE_GOAL",payload:t})},updateGoal:function(t){return e(C(t))},createGoal:function(t){return e(w(t))},deleteGoal:function(t){return e(A(t))},editGoal:function(t){return e({type:"EDIT_GOAL",payload:t})},updateDay:function(t){return e(T(t))}}})(L),x=function(e){return function(t){return t({type:"START_LOADING"}),fetch("".concat(p,"/saveall"),{method:"PATCH",headers:h(),body:JSON.stringify(e)}).then(function(e){return t({type:"STOP_LOADING"})})}},R=Object(d.b)(function(e){return e},function(e){return{addChoices:function(t){return e({type:"ADD_CHOICES",payload:t})},selectUser:function(t){return e({type:"SELECT_USER",payload:t})},editGoal:function(t){return e({type:"EDIT_GOAL",payload:t})},changeGoal:function(t){return e({type:"CHANGE_GOAL",payload:t})},updateGoal:function(t){return e(C(t))},createGoal:function(t){return e(w(t))},saveAll:function(t){return e(x(t))},editGoalName:function(t){return e({type:"EDIT_GOAL_NAME",payload:t})},deleteGoal:function(t){return e(A(t))}}})(function(e){var t=function(t){var a=0;return e.choiceFoods.forEach(function(e){var n=e.choice.amount,r=e.measures.find(function(t){return t.id===e.choice.measure_id}),o=n*r.grams/e.food.serving_grams/(r.amount?r.amount:1);a+=parseInt(e.food[t]*o)}),a.toFixed()},a=r.a.createElement("ul",{className:"grid key"},r.a.createElement("li",{className:"name"},r.a.createElement("div",null,"Name")),r.a.createElement("li",{className:"amount"},r.a.createElement("div",null,"Amount")),r.a.createElement("li",{className:"measure"},r.a.createElement("div",null,"Measure")),r.a.createElement("li",{className:"macro calories"},r.a.createElement("div",null,"Calories")),r.a.createElement("li",{className:"macro fat"},r.a.createElement("div",null,"Fat")),r.a.createElement("li",{className:"macro carbs"},r.a.createElement("div",null,"Carbs")),r.a.createElement("li",{className:"macro protein"},r.a.createElement("div",null,"Protein")),r.a.createElement("li",{className:"deleteColumn"})),n=function(a){return e.user.email?t(a)<e.goal[a]-5?"under":t(a)>e.goal[a]+5?"over":"good":null};return r.a.createElement("div",{className:"table"},localStorage.getItem("token")?r.a.createElement(k,null):r.a.createElement("div",{className:"welcome"},r.a.createElement("h1",null,"WELCOME TO HAM"),r.a.createElement("h2",null,"a simple macronutrient tracker"),r.a.createElement("hr",null)),r.a.createElement("ul",{className:"grid totalsRow"},r.a.createElement("li",{className:"totals"},r.a.createElement("span",null,"TOTALS:")),r.a.createElement("li",{className:"calories macro",placeholder:"grams"},t("calories")),r.a.createElement("li",{className:"fat macro ".concat(n("fat"))},t("fat")),r.a.createElement("li",{className:"carbs macro ".concat(n("carbs"))},t("carbs")),r.a.createElement("li",{className:"protein macro ".concat(n("protein"))},t("protein")),r.a.createElement("li",{className:"deleteColumn"})),r.a.createElement("ul",{className:"grid totalsRow"},r.a.createElement("li",{className:"totals"},r.a.createElement("span",null,"remaining:")),r.a.createElement("li",{className:"calories macro",placeholder:"grams"},e.goal.calories-t("calories")||0),r.a.createElement("li",{className:"fat macro ".concat(n("fat"))},e.goal.fat-t("fat")||0),r.a.createElement("li",{className:"carbs macro ".concat(n("carbs"))},e.goal.carbs-t("carbs")||0),r.a.createElement("li",{className:"protein macro ".concat(n("protein"))},e.goal.protein-t("protein")||0),r.a.createElement("li",{className:"deleteColumn"})),a,e.categories.sort(function(e,t){return e.created_at-t.created_at}).map(function(e){return r.a.createElement(S,{category:e,key:e.id})}),e.loading?r.a.createElement("div",{className:"loading"}):null)}),P=function(){return function(e){return e({type:"START_LOADING"}),fetch("".concat(p,"/reauth"),{method:"POST",headers:h()}).then(function(e){return e.json()}).then(function(t){e({type:"STOP_LOADING"}),t.user&&t.jwt&&e({type:"SELECT_USER",payload:t})})}},M=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",brand:"",serving_unit_amount:"",serving_unit_name:"",serving_grams:"",calories:"",fat:"",carbs:"",protein:"",cholesterol:"",dietary_fiber:"",potassium:"",saturated_fat:"",sodium:"",sugars:"",unit_size:"",upc:"",error:""},a.handleChange=function(e){a.setState(Object(D.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=a.state;t.name&&t.serving_unit_amount&&t.serving_unit_name&&t.serving_grams&&t.calories&&t.fat&&t.carbs&&t.protein?(a.props.createFood(Object(v.a)({},a.state,{categoryId:a.props.categoryId})),a.props.toggleNewFoodForm(),a.setState({name:"",brand:"",serving_unit_amount:"",serving_unit_name:"",serving_grams:"",calories:"",fat:"",carbs:"",protein:"",cholesterol:"",dietary_fiber:"",potassium:"",saturated_fat:"",sodium:"",sugars:"",unit_size:"",upc:""})):a.setState({error:"Please fill required fields"})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"createFoodContainer",style:{display:this.props.showNewFoodForm?"block":"none"}},r.a.createElement("button",{className:"closeButton",onClick:this.props.toggleNewFoodForm},"Close"),r.a.createElement("form",{onSubmit:this.handleSubmit,className:"foodForm"},this.state.error?r.a.createElement("p",{className:"errorMessage"},this.state.error):null,r.a.createElement("ul",{className:"newFoodGrid"},r.a.createElement("li",null,r.a.createElement("label",null,"Food name"),r.a.createElement("input",{type:"text",value:this.state.name,onChange:this.handleChange,name:"name",placeholder:"Food name"})),r.a.createElement("li",null,r.a.createElement("label",null,"Brand (optional)"),r.a.createElement("input",{type:"text",value:this.state.brand,onChange:this.handleChange,name:"brand",placeholder:"food brand (optional)"})),r.a.createElement("li",null,r.a.createElement("label",null,"Serving Amount"),r.a.createElement("input",{type:"number",step:"any",min:"0.1",value:this.state.serving_unit_amount,onChange:this.handleChange,name:"serving_unit_amount",placeholder:"serving amount"})),r.a.createElement("li",null,r.a.createElement("label",null,"Serving Unit"),r.a.createElement("input",{type:"text",list:"units",name:"serving_unit_name",value:this.state.serving_unit_name,onChange:this.handleChange,placeholder:"unit"}),r.a.createElement("datalist",{id:"units"},["unit","tbsp","tsp","cup","package","piece","small","medium","large"].map(function(e){return r.a.createElement("option",{value:e,key:e,name:"measure"},e," ")}))),r.a.createElement("li",null,r.a.createElement("label",null,"Serving in Grams"),r.a.createElement("input",{type:"number",step:"any",min:"0.1",value:this.state.serving_grams,onChange:this.handleChange,name:"serving_grams",placeholder:"grams/serving"})),r.a.createElement("li",null,r.a.createElement("label",null,"Calories"),r.a.createElement("input",{type:"number",step:"any",min:"0",value:this.state.calories,onChange:this.handleChange,name:"calories",placeholder:"Calories"})),r.a.createElement("li",null,r.a.createElement("label",null,"Fat"),r.a.createElement("input",{type:"number",step:"any",min:"0",value:this.state.fat,onChange:this.handleChange,name:"fat",placeholder:"fat"})),r.a.createElement("li",null,r.a.createElement("label",null,"Carbs"),r.a.createElement("input",{type:"number",step:"any",min:"0",value:this.state.carbs,onChange:this.handleChange,name:"carbs",placeholder:"carbs"})),r.a.createElement("li",null,r.a.createElement("label",null,"Protein"),r.a.createElement("input",{type:"number",step:"any",min:"0",value:this.state.protein,onChange:this.handleChange,name:"protein",placeholder:"protein"})),r.a.createElement("li",null,r.a.createElement("input",{type:"submit"}))),r.a.createElement("a",{onClick:function(){return e.setState({moreInfoForm:!e.state.moreInfoForm})},className:"showMore"},this.state.moreInfoForm?"\u2b06 Show Less Info (Optional) \u2b06":"\u2b07 Add More Info (Optional) \u2b07"),r.a.createElement("ul",{className:"newFoodGrid",style:{display:this.state.moreInfoForm?"grid":"none"}},r.a.createElement("li",null,r.a.createElement("label",null,"Saturated Fat"),r.a.createElement("input",{type:"number",step:"any",min:"0",value:this.state.saturated_fat,onChange:this.handleChange,name:"saturated_fat",placeholder:"saturated fat"})),r.a.createElement("li",null,r.a.createElement("label",null,"Sugars"),r.a.createElement("input",{type:"number",step:"any",min:"0",value:this.state.sugars,onChange:this.handleChange,name:"sugars",placeholder:"sugars"})),r.a.createElement("li",null,r.a.createElement("label",null,"Dietary Fiber"),r.a.createElement("input",{type:"number",step:"any",min:"0",value:this.state.dietary_fiber,onChange:this.handleChange,name:"dietary_fiber",placeholder:"dietary fiber"})),r.a.createElement("li",null,r.a.createElement("label",null,"Sodium"),r.a.createElement("input",{type:"number",step:"any",min:"0",value:this.state.sodium,onChange:this.handleChange,name:"sodium",placeholder:"sodium"})),r.a.createElement("li",null,r.a.createElement("label",null,"Cholesterol"),r.a.createElement("input",{type:"number",step:"any",min:"0",value:this.state.cholesterol,onChange:this.handleChange,name:"cholesterol",placeholder:"cholesterol"})),r.a.createElement("li",null,r.a.createElement("label",null,"Potassium"),r.a.createElement("input",{type:"number",step:"any",min:"0",value:this.state.potassium,onChange:this.handleChange,name:"potassium",placeholder:"potassium"})),r.a.createElement("li",null,r.a.createElement("label",null,"Unit Size"),r.a.createElement("input",{type:"number",step:"any",min:"0",value:this.state.unit_size,onChange:this.handleChange,name:"unit_size",placeholder:"unit size"})),r.a.createElement("li",null,r.a.createElement("label",null,"Bar Code / UPC"),r.a.createElement("input",{type:"number",step:"any",min:"0",value:this.state.upc,onChange:this.handleChange,name:"upc",placeholder:"UPC code"})),r.a.createElement("li",null),r.a.createElement("li",null,r.a.createElement("input",{type:"submit"})))))}}]),t}(r.a.Component),U=Object(d.b)(null,function(e){return{createFood:function(t){return e(function(e){return function(t){return t({type:"START_LOADING"}),fetch("".concat(p,"/foods"),{method:"POST",headers:h(),body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){t({type:"STOP_LOADING"}),t({type:"ADD_FOOD",payload:e})})}}(t))}}})(M),H=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={},a.handleSignOut=function(){a.setState({username:"",email:"",usernameOrEmail:"",password:"",signup:!1,name:null,date:null,editDay:!1}),localStorage.removeItem("token"),a.props.signOut()},a.prettyDayDisplay=function(e){var t=e.date;return"".concat(t.slice(5,7),"-").concat(t.slice(8,10),"-").concat(t.slice(2,4))+(e.name?" ".concat(e.name):"")},a.dayOptions=function(){return a.props.days.sort(function(e,t){return new Date(t.date)-new Date(e.date)}).map(function(e){return r.a.createElement("option",{value:e.id,key:e.id},a.prettyDayDisplay(e))})},a.editDay=function(){a.setState({editDay:!0})},a.handleDayFormChange=function(e){a.setState(Object(D.a)({},e.target.name,e.target.value))},a.updateDay=function(e){if(e.preventDefault(),a.setState({editDay:!1,name:null,date:null}),a.state.name!==a.props.day.name||a.state.date&&a.state.date!==a.props.day.date){var t=Object(v.a)({},a.props.day,{name:a.state.name||a.props.day.name,date:a.state.date||a.props.day.date});a.props.editDay(t),a.props.updateDay(t)}},a.dayChangeHandler=function(e){a.props.saveAll(a.props),a.props.selectDay(e.target.value)},a.todaysDate=function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,n=e.getDate();return a<10&&(a="0".concat(a)),n<10&&(n="0".concat(n)),"".concat(t,"-").concat(a,"-").concat(n)},a.deleteDay=function(){if(a.props.days.length>1&&window.confirm("Are you sure you want to delete this day?")){var e=a.props.days.filter(function(e){return e.id!==a.props.day.id})[0];a.props.selectDay(e.id),a.props.deleteDay(a.props.day.id)}},a.toggleNewFoodForm=function(){a.setState({showNewFoodForm:!a.state.showNewFoodForm})},a.copyDay=function(){a.props.copyDay(a.props.day.id)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"menu"},r.a.createElement("div",{className:"menuButton"},r.a.createElement("img",{src:"menu-icon-white.png",className:"menuButton",alt:"menu button"}),r.a.createElement("div",{className:"sideMenu"},r.a.createElement("ul",{className:"top"},r.a.createElement("li",null,this.props.user.username),r.a.createElement("li",null,this.props.user.email)),r.a.createElement("ul",{className:"bottom"},r.a.createElement("li",{onClick:this.toggleNewFoodForm},"Create Your Own Food"),r.a.createElement(U,{showNewFoodForm:this.state.showNewFoodForm,toggleNewFoodForm:this.toggleNewFoodForm,categoryId:this.props.categories[0].id}),r.a.createElement("li",{className:"contact"},r.a.createElement("a",{href:"mailto:jamesdorr3@gmail.com"},"Contact")),r.a.createElement("li",{className:"signOut",onClick:this.handleSignOut},"Sign Out"))))),r.a.createElement("div",{className:"daySelect"},this.state.editDay?r.a.createElement("form",{className:"dayEdit",onSubmit:this.updateDay},r.a.createElement("input",{type:"text",name:"name",placeholder:"name",defaultValue:this.props.day.name,value:this.state.name,onChange:this.handleDayFormChange}),r.a.createElement("input",{type:"date",name:"date",placeholder:"date",defaultValue:this.props.day.date,value:this.state.date,onChange:this.handleDayFormChange}),r.a.createElement("input",{type:"submit",value:"\u2714"})):r.a.createElement("span",{className:"daySelect"},r.a.createElement("select",{onChange:this.dayChangeHandler,value:this.props.day.id,className:"daySelect"},this.dayOptions()),r.a.createElement("span",{className:"dropdownButton"},r.a.createElement("button",{className:"nonMenu"},"\u22ef"),r.a.createElement("ul",{className:"dropdown"},r.a.createElement("li",{onClick:this.props.createDay},r.a.createElement("button",null,r.a.createElement("img",{src:"add-icon-circle.png",className:"newDay addButton",alt:"add new Day"})),"Add Day"),r.a.createElement("li",{onClick:this.editDay},r.a.createElement("button",null,r.a.createElement("img",{src:"edit-icon.png",className:"editDay editButton",alt:"edit Day"})),"Edit Day"),r.a.createElement("li",{onClick:this.copyDay},r.a.createElement("button",{className:"copyButton"},r.a.createElement("span",{className:"copy"},"\ud834\udf4c")),"Copy Day"),r.a.createElement("li",{onClick:this.deleteDay},r.a.createElement("button",null,r.a.createElement("img",{src:"trash-icon.png",className:"deleteDay deleteButton",alt:"delete Day"})),"Delete Day"))))),r.a.createElement("div",{className:"appName"},r.a.createElement("h1",{className:"appName"},"HAM")))}}]),t}(r.a.Component),B=Object(d.b)(function(e){return e},function(e){return{signOut:function(){return e({type:"SIGN_OUT"})},editDay:function(t){return e({type:"EDIT_DAY",payload:t})},updateDay:function(t){return e(T(t))},reauth:function(){return e(P())},createDay:function(){return e(F())},selectDay:function(t){return e(I(t))},saveAll:function(t){return e(x(t))},startLoading:function(){return e({type:"START_LOADING"})},stopLoading:function(){return e({type:"STOP_LOADING"})},deleteDay:function(t){return e(G(t))},copyDay:function(t){return e(function(e){return function(t){return t({type:"START_LOADING"}),fetch("".concat(p,"days/copy/").concat(e),{headers:h()}).then(function(e){return e.json()}).then(function(e){t({type:"STOP_LOADING"}),t({type:"ADD_DAY",payload:e}),t({type:"SELECT_DAY",payload:e})})}}(t))}}})(H),Y=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={usernameOrEmail:"",password:"",error:""},a.handleSubmit=function(e){e.preventDefault(),a.state.password&&(a.props.startLoading(),a.props.auth({username_or_email:a.state.usernameOrEmail,password:a.state.password}).then(function(e){return e.json()}).then(function(e){a.props.stopLoading(),e.user&&e.jwt?(localStorage.setItem("token",e.jwt),a.props.selectUser(e)):a.setState({error:e.message})}))},a.handleChange=function(e){a.setState(Object(D.a)({},e.target.name,e.target.value))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{value:this.state.usernameOrEmail,name:"usernameOrEmail",id:"usernameOrEmail",onChange:this.handleChange,type:"text",placeholder:"username/email"}),r.a.createElement("input",{value:this.state.password,name:"password",onChange:this.handleChange,type:"password",placeholder:"password"}),r.a.createElement("input",{value:"Log In",type:"submit",className:"standardButton"}),r.a.createElement("button",{onClick:this.props.toggleSignup,className:"standardButton"},this.props.showSignup?"Close Sign Up":"Sign Up")),this.state.error?r.a.createElement("p",{className:"errorMessage"},this.state.error):null)}}]),t}(r.a.Component),q=Object(d.b)(null,function(e){return{selectUser:function(t){return e({type:"SELECT_USER",payload:t})},startLoading:function(){return e({type:"START_LOADING"})},stopLoading:function(){return e({type:"STOP_LOADING"})},auth:function(t){return e(function(e){return function(t){return t({type:"START_LOADING"}),fetch("".concat(p,"/auth"),{method:"POST",headers:h(),body:JSON.stringify({user:Object(v.a)({},e)})})}}(t))}}})(Y),J=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",email:"",password:"",password2:"",error:""},a.handleSubmit=function(e){e.preventDefault(),a.state.password&&a.state.username&&a.state.email?/\w+@\w+\.\w+/.test(a.state.email)?a.state.password!==a.state.password2?a.setState({error:"Passwords must match"}):a.state.password.length<6?a.setState({error:"Password must be at least 6 characters"}):a.props.createUser(a.state):a.setState({error:"Email is invalid"}):a.setState({error:"Username, email, and password required"})},a.handleSignupClick=function(){a.state.signup?(a.signup(),a.setState({password:""})):a.setState({signup:!0})},a.handleChange=function(e){a.setState(Object(D.a)({},e.target.name,e.target.value))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"modal",style:{display:"".concat(this.props.showSignup&&!this.props.user.email?"block":"none")}},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"signupForm"},r.a.createElement("li",null,r.a.createElement("label",null,"Username"),r.a.createElement("br",null),r.a.createElement("input",{required:!0,value:this.state.username,name:"username",onChange:this.handleChange,type:"text",placeholder:"username"})),r.a.createElement("li",null,r.a.createElement("label",null,"Email"),r.a.createElement("br",null),r.a.createElement("input",{required:!0,pattern:"\\w+@\\w+\\.\\w+",value:this.state.email,name:"email",onChange:this.handleChange,type:"email",placeholder:"email"})),r.a.createElement("li",null,r.a.createElement("label",null,"Password"),r.a.createElement("br",null),r.a.createElement("input",{required:!0,value:this.state.password,minlength:"6",name:"password",onChange:this.handleChange,type:"password",placeholder:"6 characters"})),r.a.createElement("li",null,r.a.createElement("label",null,"Password"),r.a.createElement("br",null),r.a.createElement("input",{required:!0,value:this.state.password2,minlength:"6",name:"password2",onChange:this.handleChange,type:"password",placeholder:"confirm"})),r.a.createElement("li",null,r.a.createElement("input",{value:"Sign Up",type:"submit"}))),this.state.error?r.a.createElement("p",{className:"errorMessage"},this.state.error):null)}}]),t}(r.a.Component),z=Object(d.b)(function(e){return e},function(e){return{selectUser:function(t){return e({type:"SELECT_USER",payload:t})},createUser:function(t){return e(function(e){return function(t){return t({type:"START_LOADING"}),fetch("".concat(p,"/users"),{method:"POST",headers:h(),body:JSON.stringify({user:e})}).then(function(e){return e.json()}).then(function(e){if(t({type:"STOP_LOADING"}),e.user&&e.jwt)return localStorage.setItem("token",e.jwt),t({type:"SELECT_USER",payload:e}),e})}}(t))}}})(J),W=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={username:"",email:"",usernameOrEmail:"",password:"",signup:!1,editDayName:!1,showSignup:!1},a.handleSignOut=function(){a.setState({username:"",email:"",usernameOrEmail:"",password:"",signup:!1,editDayName:!1,dayName:""}),localStorage.removeItem("token"),a.props.signOut()},a.toggleSignup=function(e){e.preventDefault(),a.setState({showSignup:!a.state.showSignup})},a.signedIn=function(){return!!a.props.user.email},a.prettyDayDisplay=function(e){var t=new Date(e.created_at);return"".concat(t.getMonth()+1,"-").concat(t.getDate(),"-").concat(t.getFullYear())+(e.name?" ".concat(e.name):"")},a.dayOptions=function(){return a.props.days.sort(function(e,t){return new Date(t.created_at)-new Date(e.created_at)}).map(function(e){return r.a.createElement("option",{value:e.id,key:e.id},a.prettyDayDisplay(e))})},a.editDayToggle=function(){a.setState({editDayName:!a.state.editDayName})},a.handleDayNameChange=function(e){a.setState({dayName:e.target.value})},a.dayChangeHandler=function(e){a.props.saveAll(a.props),a.props.selectDay(e.target.value)},a.todaysDate=function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,n=e.getDate();return a<10&&(a="0".concat(a)),n<10&&(n="0".concat(n)),"".concat(t,"-").concat(a,"-").concat(n)},a.deleteDay=function(){if(a.props.days.length>1&&window.confirm("Are you sure you want to delete this day?")){var e=a.props.days.filter(function(e){return e.id!==a.props.day.id})[0];a.props.selectDay(e.id),a.props.deleteDay(a.props.day.id)}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){localStorage.getItem("token")&&this.props.reauth()}},{key:"render",value:function(){return r.a.createElement("div",{className:"notSignedInHeader"},r.a.createElement("div",{className:"notSignedInMessage"},r.a.createElement("p",null,"Use HAM free. Log in to record data")),r.a.createElement("div",{className:"login"},r.a.createElement(q,{showSignup:this.state.showSignup,toggleSignup:this.toggleSignup,handleChange:this.handleChange,login:this.login}),r.a.createElement(z,{showSignup:this.state.showSignup,toggleSignup:this.toggleSignup})))}}]),t}(r.a.Component),V=Object(d.b)(function(e){return e},function(e){return{signOut:function(){return e({type:"SIGN_OUT"})},reauth:function(){return e(P())},createDay:function(){return e(F())},selectDay:function(t){return e(I(t))},editDayName:function(t){return e({type:"EDIT_DAY_NAME",payload:t})},saveAll:function(t){return e(x(t))},startLoading:function(){return e({type:"START_LOADING"})},stopLoading:function(){return e({type:"STOP_LOADING"})},deleteDay:function(t){return e(G(t))}}})(W),K=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={username:"",email:"",usernameOrEmail:"",password:"",signup:!1,editDayName:!1,showSignup:!1},a.handleSignOut=function(){a.setState({username:"",email:"",usernameOrEmail:"",password:"",signup:!1,editDayName:!1,dayName:""}),localStorage.removeItem("token"),a.props.signOut()},a.toggleSignup=function(e){e.preventDefault(),a.setState({showSignup:!a.state.showSignup})},a.prettyDayDisplay=function(e){var t=new Date(e.created_at);return"".concat(t.getMonth()+1,"-").concat(t.getDate(),"-").concat(t.getFullYear())+(e.name?" ".concat(e.name):"")},a.dayOptions=function(){return a.props.days.sort(function(e,t){return new Date(t.created_at)-new Date(e.created_at)}).map(function(e){return r.a.createElement("option",{value:e.id,key:e.id},a.prettyDayDisplay(e))})},a.editDayToggle=function(){a.setState({editDayName:!a.state.editDayName})},a.handleDayNameChange=function(e){a.setState({dayName:e.target.value})},a.dayChangeHandler=function(e){a.props.saveAll(a.props),a.props.selectDay(e.target.value)},a.todaysDate=function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,n=e.getDate();return a<10&&(a="0".concat(a)),n<10&&(n="0".concat(n)),"".concat(t,"-").concat(a,"-").concat(n)},a.deleteDay=function(){if(a.props.days.length>1&&window.confirm("Are you sure you want to delete this day?")){var e=a.props.days.filter(function(e){return e.id!==a.props.day.id})[0];a.props.selectDay(e.id),a.props.deleteDay(a.props.day.id)}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;localStorage.getItem("token")&&this.props.reauth(),window.addEventListener("beforeunload",function(t){e.props.saveAll(e.props)}),document.addEventListener("keydown",function(t){t.metaKey&&"KeyS"===t.code&&(t.preventDefault(),e.props.saveAll(e.props))})}},{key:"render",value:function(){return localStorage.getItem("token")?r.a.createElement(B,null):r.a.createElement(V,null)}}]),t}(r.a.Component),X=Object(d.b)(function(e){return e},function(e){return{signOut:function(){return e({type:"SIGN_OUT"})},reauth:function(){return e(P())},createDay:function(){return e(F())},selectDay:function(t){return e(I(t))},editDayName:function(t){return e({type:"EDIT_DAY_NAME",payload:t})},saveAll:function(t){return e(x(t))},startLoading:function(){return e({type:"START_LOADING"})},stopLoading:function(){return e({type:"STOP_LOADING"})},deleteDay:function(t){return e(G(t))},updateDay:function(t){return e(T(t))}}})(K),$=Object(d.b)(null,function(e){return{addChoice:function(t){return e({type:"ADD_CHOICES",payload:[t]})},selectSearchResult:function(t){return e(g(t))}}})(function(e){return r.a.createElement("div",{className:"footer"},r.a.createElement("a",{href:"http://ndb.nal.usda.gov",className:"attribution"},r.a.createElement("div",{className:"small"},"Powered by the"),r.a.createElement("h2",null,"USDA")),r.a.createElement("span",{className:"hidden"},"Powered by the U.S. Department of Agriculture, Agricultural Research Service, 2019 ",r.a.createElement("br",null)," USDA Branded Food Products Database - Nutrient Data Laboratory Home Page http://ndb.nal.usda.gov"))}),Q=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onDragEnd=function(e){var t=e.destination,n=e.draggableId;if(t){var r=a.props.choiceFoods.find(function(e){return e.choice.id===n}),o=t.droppableId,l=a.props.choiceFoods.filter(function(e){return e.choice.category_id===o}).sort(function(e,t){return e.choice.index-t.choice.index}).map(function(e){return e.choice.id});if(r.choice.category_id===o){var c=l.indexOf(r.choice.id);l.splice(c,1)}l.splice(t.index,0,r.choice.id),l.forEach(function(e,t){a.props.editChoice({choice:{id:e,index:t,category_id:o}})})}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(X,null),r.a.createElement(b.a,{onDragEnd:this.onDragEnd},r.a.createElement(R,null)),r.a.createElement("div",{className:"loading",style:{display:this.props.loading?"block":"none"}}),r.a.createElement("div",{className:"footerSearch"},r.a.createElement(E,null)),r.a.createElement($,null))}}]),t}(r.a.Component),Z=Object(d.b)(function(e){return e},function(e){return{handleDrop:function(t,a,n){return e({type:"HANDLE_DROP",payload:{choicesIds:t,choiceId:a,categoryId:n}})},updateIndex:function(t){return e({type:"UPDATE_INDEX",payload:t})},updateCategory:function(t,a){return e({type:"UPDATE_CATEGORY",payload:{choiceId:t,categoryId:a}})},editChoice:function(t){return e({type:"EDIT_CHOICE",payload:t})}}})(Q);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ee=a(9),te=a(10),ae={categories:[{name:"Breakfast",created_at:1,id:1},{name:"Lunch",created_at:2,id:2},{name:"Dinner",created_at:3,id:3}],day:{},days:[],choiceFoods:[],goal:{},goals:[],user:{},error:{},loading:!1,removed:[]},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CHOICE":return Object(v.a)({},e,{choiceFoods:[].concat(Object(te.a)(e.choiceFoods),[{choice:Object(v.a)({},t.payload.choice,{id:t.payload.choice.id||Date.now()}),food:t.payload.food,measures:t.payload.measures}])});case"ADD_CHOICES":return Object(v.a)({},e,{choiceFoods:[].concat(Object(te.a)(e.choiceFoods),Object(te.a)(t.payload))});case"DELETE_CHOICE":var a=e.choiceFoods.find(function(e){return e.choice.id===t.payload});return Object(v.a)({},e,{choiceFoods:e.choiceFoods.filter(function(e){return e.choice.id!==t.payload}),removed:[].concat(Object(te.a)(e.removed.filter(function(e){return e.id!==a.food.id})),[a.food])});case"SELECT_USER":return Object(v.a)({},e,{categories:t.payload.user.categories,choiceFoods:t.payload.user.choice_foods,day:t.payload.user.day,days:t.payload.user.days,goal:t.payload.user.goal,goals:t.payload.user.goals,user:{email:t.payload.user.email,id:t.payload.user.id,username:t.payload.user.username}});case"EDIT_GOAL":return Object(v.a)({},e,{goal:Object(v.a)({},e.goal,t.payload),goals:[].concat(Object(te.a)(e.goals.filter(function(t){return t.id!==e.goal.id})),[Object(v.a)({},e.goal,t.payload)])});case"CHANGE_GOAL":var n=t.payload,r=e.goals.find(function(e){return e.id===parseInt(n)});return Object(v.a)({},e,{goal:r});case"SIGN_OUT":return Object(v.a)({},e,{choiceFoods:[],goal:{},goals:[],user:{}});case"HANDLE_DROP":var o=function(){for(var a=[],n=t.payload.choicesIds,r=function(t){var r=e.choiceFoods.find(function(e){return e.choice.id===parseInt(n[t])});a.push(Object(v.a)({},r,{choice:Object(v.a)({},r.choice,{index:t})}))},o=0;o<n.length;o++)r(o);return a.find(function(e){return e.choice.id===t.payload.choiceId}).choice.category_id=t.payload.categoryId,{v:Object(v.a)({},e,{choiceFoods:a})}}();if("object"===typeof o)return o.v;case"ADD_DAY":return Object(v.a)({},e,{choiceFoods:[],day:t.payload,days:[].concat(Object(te.a)(e.days),[Object(v.a)({},t.payload,{goal_id:t.payload.goal.id})]),goal:t.payload.goal});case"SELECT_DAY":return Object(v.a)({},e,{choiceFoods:t.payload.choice_foods,day:{date:t.payload.date,id:t.payload.id,name:t.payload.name},goal:t.payload.goal});case"ADD_FOOD":return Object(v.a)({},e,{choiceFoods:[].concat(Object(te.a)(e.choiceFoods),[t.payload])});case"EDIT_CHOICE":var l=e.choiceFoods.find(function(e){return e.choice.id===t.payload.choice.id});return Object(v.a)({},e,{choiceFoods:[].concat(Object(te.a)(e.choiceFoods.filter(function(e){return parseInt(e.choice.id)!==parseInt(l.choice.id)})),[Object(v.a)({},l,{choice:Object(v.a)({},l.choice,t.payload.choice)})])});case"EDIT_DAY":return Object(v.a)({},e,{day:Object(v.a)({},e.day,t.payload),days:[].concat(Object(te.a)(e.days.filter(function(t){return t.id!==e.day.id})),[Object(v.a)({},e.day,t.payload)])});case"ADD_GOAL":return Object(v.a)({},e,{goal:t.payload,goals:[].concat(Object(te.a)(e.goals),[t.payload])});case"START_LOADING":return Object(v.a)({},e,{loading:!0});case"STOP_LOADING":return Object(v.a)({},e,{loading:!1});case"DELETE_DAY":return Object(v.a)({},e,{days:e.days.filter(function(e){return e.id!==parseInt(t.payload)})});case"DELETE_GOAL":var c=e.goals.filter(function(e){return e.id!==parseInt(t.payload)});return Object(v.a)({},e,{goals:c,goal:c[0]});default:return e}},re=a(47),oe=Object(ee.d)(ne,Object(ee.a)(re.a));l.a.render(r.a.createElement(d.a,{store:oe},r.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[48,1,2]]]);
//# sourceMappingURL=main.3b1befee.chunk.js.map